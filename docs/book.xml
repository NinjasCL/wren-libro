<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="2"?>
<?asciidoc-numbered?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="es">
<info>
<title>El <emphasis>Wren</emphasis> libro</title>
<date>2020-10-30</date>
<copyright>
<holder>CC-BY-NC-SA 4.0</holder>
</copyright>
<author>
<personname>
<firstname>Camilo</firstname>
<othername>A.</othername>
<surname>Castro</surname>
</personname>
<email>https://github.com/clsource[@clsource]</email>
</author>
<authorinitials>CAC</authorinitials>
<cover role="front">
<mediaobject>
<imageobject>
<imagedata fileref="images/default-cover.png"/>
</imageobject>
</mediaobject>
</cover>
</info>
<preface>
<title></title>
<abstract>
<simpara>En este peque√±o documento se detallar√°n lo b√°sico del lenguaje de programaci√≥n <link xl:href="http://wren.io">Wren</link>.</simpara>
</abstract>
</preface>
<preface xml:id="_prefacio">
<title>Prefacio</title>

</preface>
<dedication xml:id="_dedicatoria">
<title>Dedicatoria</title>

</dedication>
<chapter xml:id="_peque√±a_historia_de_wren">
<title>Peque√±a Historia de <link xl:href="https://github.com/wren-lang/wren"><emphasis>Wren</link></emphasis></title>
<simpara><link xl:href="https://github.com/wren-lang/wren"><emphasis>Wren</link></emphasis> es un lenguaje de programaci√≥n <link xl:href="https://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos">orientado a objetos</link> creado por <link xl:href="http://journal.stuffwithstuff.com/">Bob Nystrom</link>, un ex desarrollador de videojuegos y creador de otros lenguajes de programaci√≥n como <link xl:href="https://github.com/munificent/vigil">Vigil</link>, <link xl:href="http://finch.stuffwithstuff.com/">Finch</link> y <link xl:href="http://magpie-lang.org/">Magpie</link>. Ha escrito dos libros: <link xl:href="http://gameprogrammingpatterns.com/">Game Programming Patterns</link> y <link xl:href="http://craftinginterpreters.com/">Crafting Interpreters</link>.</simpara>
<simpara>El primer <emphasis>commit</emphasis> de <emphasis>Wren</emphasis> fue escrito el <link xl:href="https://github.com/wren-lang/wren/tree/2f6a6889f1b4a1ba86aeb169e7398704b1ee04c0">22 de Octubre del 2013</link> y su versi√≥n m√°s reciente es la <emphasis>0.3</emphasis>. Actualmente <emphasis>Bob Nystrom</emphasis> pas√≥ a ser colaborador y la evoluci√≥n del lenguaje fue asignada a <link xl:href="https://github.com/underscorediscovery">_discovery</link> (creador del <link xl:href="https://luxeengine.com">game engine Luxe</link>).</simpara>
<simpara><emphasis>Wren</emphasis> fue creado como una alternativa a <emphasis>Lua</emphasis> y otros <link xl:href="https://en.wikipedia.org/wiki/Scripting_language">lenguajes de scripting</link> para personas que estuvieran m√°s familiarizadas con lenguajes orientados a objetos como <emphasis>Java</emphasis>, <emphasis>C#</emphasis>, o <emphasis>C++</emphasis>. Su principal foco es la simpleza.</simpara>
<simpara>La p√°gina oficial de Wren es <link xl:href="http://wren.io">Wren.io</link>.</simpara>
<section xml:id="_qu√©_es_un_wren">
<title>¬øQu√© es un <emphasis>Wren</emphasis>?</title>
<simpara><emphasis>Wren</emphasis> es una <link xl:href="https://es.wikipedia.org/wiki/Troglodytidae">tipo de ave peque√±a</link> perteneciente a la familia de los troglod√≠tidos. En Chile tenemos al <link xl:href="https://www.avesdechile.cl/074.htm">Cherc√°n o Chochin Criollo</link>.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77261969-2240d580-6c71-11ea-93d0-4341e82c2f92.png"/>
</imageobject>
<textobject><phrase>Chochin Criollo - Fotograf√≠a por Juan Tassara B.</phrase></textobject>
</inlinemediaobject></simpara>
<literallayout class="monospaced">Fotograf√≠a por Juan Tassara B en https://www.avesdechile.cl.</literallayout>
</section>
</chapter>
<chapter xml:id="_c√≥mo_usar_wren">
<title>¬øC√≥mo usar Wren?</title>
<simpara><emphasis>Wren</emphasis> es un lenguaje interpretado, lo que significa que no requiere de compilaci√≥n. Basta simplemente tener un int√©rprete para ejecutar los algoritmos. Hay varias alternativas.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara><link xl:href="https://github.com/wren-lang/wren">Compilar tu propio int√©rprete de <emphasis>Wren</emphasis></link>. Esta es la opci√≥n para valientes.</simpara>
</listitem>
<listitem>
<simpara><link xl:href="https://github.com/wren-lang/wren-cli/releases">Utiliza <emphasis>Wren CLI</emphasis></link> para ejecutar archivos <emphasis>*.wren</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Utiliza un engine de juegos como <link xl:href="https://domeengine.com/"><emphasis>Dome</emphasis></link>, <link xl:href="https://tic.computer"><emphasis>TIC 80</emphasis></link> o <link xl:href="https://luxeengine.com/alpha/"><emphasis>Luxe</emphasis></link> que traen <emphasis>Wren</emphasis> listo para llegar y utilizar.</simpara>
</listitem>
<listitem>
<simpara>Utiliza <link xl:href="https://wren.io/try/"><emphasis>Wren Try</emphasis></link> para probar el lenguaje en tu navegador.</simpara>
</listitem>
</orderedlist>
<simpara>Una vez que tengas tu int√©rprete instalado puedes ejecutar por ejemplo`./wren main.wren` para ver el resultado de tu script.</simpara>
<section xml:id="_wren_cli">
<title><link xl:href="https://github.com/wren-lang/wren-cli">Wren CLI</link></title>
<simpara>La terminal de <emphasis>Wren</emphasis> llamada <emphasis>Wren CLI</emphasis> (<link xl:href="https://es.wikipedia.org/wiki/Interfaz_de_l%C3%ADnea_de_comandos">Interfaz de l√≠nea de comandos</link>) permite dos modos de operaci√≥n. El primero es el modo <link xl:href="https://es.wikipedia.org/wiki/REPL"><emphasis>REPL</emphasis></link> (Bucle Lectura-Evaluaci√≥n-Impresi√≥n) el cual nos permite evaluar las instrucciones una a una. El segundo modo es el int√©rprete que permite ejecutar scripts <emphasis>Wren</emphasis>.</simpara>
<simpara>Si ejecutamos simplemente el comando <literal>./wren</literal> entraremos al modo <emphasis>REPL</emphasis>. Donde se nos mostrar√° un simp√°tico pajarito y la versi√≥n de <emphasis>Wren</emphasis> instalada.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77837383-22444800-713f-11ea-8db4-3f404faabc10.png"/>
</imageobject>
<textobject><phrase>Wren CLI</phrase></textobject>
</inlinemediaobject></simpara>
<section xml:id="_operaciones_matem√°ticas">
<title>Operaciones Matem√°ticas</title>
<simpara>Podremos ejecutar operaciones matem√°ticas como <literal>5 * 5</literal>.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77837948-7ce0a280-7145-11ea-8b43-3f91f7491b35.png"/>
</imageobject>
<textobject><phrase>5 * 5</phrase></textobject>
</inlinemediaobject></simpara>
</section>
<section xml:id="_system_print">
<title>System.print()</title>
<simpara>O Tambi√©n mostrar un mensaje utilizando <literal>System.print()</literal>.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77837982-d517a480-7145-11ea-86f4-7a24e5ecc628.png"/>
</imageobject>
<textobject><phrase>System.print()</phrase></textobject>
</inlinemediaobject></simpara>
<simpara>¬øPor qu√© aparece la palabra <literal>Plop!</literal> dos veces?. Simplemente por que la primera vez es el resultado de la operaci√≥n <literal>System.print()</literal> (mostrar un valor), mientras que la segunda vez est√° mostrando el valor retornado por <literal>System.print()</literal>, el cual es el mismo texto.</simpara>
</section>
<section xml:id="_errores">
<title>Errores</title>
<simpara>Si cometemos alg√∫n error <emphasis>Wren CLI</emphasis> nos avisar√° con un bonito mensaje.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77838174-c4682e00-7147-11ea-9e82-ffd2dc4dd1f9.png"/>
</imageobject>
<textobject><phrase>Error</phrase></textobject>
</inlinemediaobject></simpara>
</section>
<section xml:id="_ejecuci√≥n_de_archivos">
<title>Ejecuci√≥n de archivos</title>
<simpara>Cuando necesitamos algo mucho m√°s avanzado podemos utilizar archivos que finalicen con la extensi√≥n <emphasis>*.wren</emphasis>. El nombre m√°s com√∫n es <emphasis>main.wren</emphasis>, aunque puedes llamarlo con cualquier nombre. Para ejecutar un archivo espec√≠fico simplemente se debe utilizar <literal>./wren &lt;archivo.wren&gt;</literal>.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Creamos un nuevo archivo llamado <literal>main.wren</literal>.</simpara>
</listitem>
<listitem>
<simpara>Escribimos nuestro c√≥digo (En este caso <literal>System.print("Plop!")</literal>) y guardamos.</simpara>
</listitem>
<listitem>
<simpara>Finalmente Ejecutamos <literal>./wren main.wren</literal>.</simpara>
</listitem>
</orderedlist>
<simpara>Deber√≠amos ver un resultado similar a este:</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77839010-7c4d0980-714f-11ea-90df-4330a821d207.png"/>
</imageobject>
<textobject><phrase>Plop!</phrase></textobject>
</inlinemediaobject></simpara>
<simpara>Notar como solamente aparece una vez "Plop!", ya que no estamos en modalidad <emphasis>REPL</emphasis>.</simpara>
</section>
<section xml:id="_c√≥digos_de_salida_exit_code">
<title>C√≥digos de salida (Exit code)</title>
<simpara>Cada vez que un programa termina su ejecuci√≥n devuelve un c√≥digo num√©rico para indicar si termin√≥ exitosamente o tuvo un alg√∫n tipo de error mientras se ejecutaba.</simpara>
<simpara>La convenci√≥n tradicional es considerar el c√≥digo cero (0) como √©xito y cualquier otro n√∫mero como error. No hay un est√°ndar definido para la asignaci√≥n de n√∫meros de error. <emphasis>Wren</emphasis> se basa levemente en los c√≥digos utilizados por el sistema operativo <link xl:href="https://github.com/openbsd/src/blob/master/include/sysexits.h"><emphasis>BSD</emphasis></link>.</simpara>
<simpara>Actualmente no puedes elegir el c√≥digo de error. <emphasis>Wren</emphasis> autom√°ticamente asignar√° el c√≥digo que mejor se ajuste a la situaci√≥n. Por ejemplo si utilizar la instrucci√≥n para terminar la ejecuci√≥n del programa <literal>Fiber.abort("Mensaje de Error")</literal> el c√≥digo asignado sera de 70 (error interno del software).</simpara>
<simpara>La siguiente es una tabla con los c√≥digos de BSD m√°s algunos otros adicionales.</simpara>
<screen linenumbering="numbered">0 - Fin del programa exitoso
1 - Error desconocido
2 - (grep) Uso incorrecto del comando | (bash) Error de entrada/salida
64 - Uso incorrecto del comando
65 - Error de formato de datos
66 - Sin acceso a la entrada
67 - Direcci√≥n desconocida
68 - Nombre de dominio (host name) desconocido
69 - Servicio no disponible
70 - Error interno del software
71 - Error de sistema
72 - Archivo cr√≠tico del sistema no encontrado
73 - Imposible de crear archivo de salida
74 - Error de entrada/salida
75 - Falla temporal
76 - Error remoto en protocolo
77 - Permiso denegado
78 - Error de configuraci√≥n
126 - Comando encontrado, pero no es ejecutable
127 - Comando no encontrado
128 - C√≥digo de salida no v√°lido
128   Error fatal terminado por kill -9
140 - Comando terminado por Ctrl-C
141 - Comando terminado por Ctrl-D
255 - C√≥digo de salida fuera de rango</screen>
<simpara>Puedes verificar el c√≥digo num√©rico de salida utilizando el siguiente comando (bash)</simpara>
<simpara><literal>./wren main.wren | echo "Exit code ${PIPESTATUS[0]}"</literal></simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="https://user-images.githubusercontent.com/292738/77839414-d9968a00-7152-11ea-9bd3-b42ff06a4d1a.png"/>
</imageobject>
<textobject><phrase>Exit Code 0</phrase></textobject>
</inlinemediaobject></simpara>
</section>
</section>
<section xml:id="_ejercicios">
<title>Ejercicios</title>
<section xml:id="ex-c1-e1">
<title>¬°Hola Wren!</title>
<simpara>Es una <link xl:href="https://es.wikipedia.org/wiki/Hola_mundo">tradici√≥n</link> que cuando se est√© aprendiendo
un lenguaje de programaci√≥n se escriba una variante
del mensaje "!Hola mundo¬°". Este es un programa
muy simple que permite verificar que tu computadora
esta correctamente configurada para correr programas
en <emphasis>Wren</emphasis>.</simpara>
<simpara>Para este ejercicio simplemente se debe crear un nuevo
archivo llamado <literal>hola.wren</literal> con una √∫nica instrucci√≥n
que muestre el mensaje "¬°Hola Wren!".</simpara>
<simpara>Luego ejecutar el programa utilizando el int√©rprete de <emphasis>Wren</emphasis>.</simpara>
<formalpara>
<title>Ejecuci√≥n</title>
<para><literal>$ ./wren hola.wren</literal></para>
</formalpara>
<formalpara>
<title>Salida</title>
<para>
<screen linenumbering="numbered">¬°Hola Wren!</screen>
</para>
</formalpara>
</section>
</section>
</chapter>
<chapter xml:id="_nociones_b√°sicas">
<title>Nociones B√°sicas</title>
<simpara>Todo lenguaje de programaci√≥n define estructuras base que
determinan la forma de escribir el lenguaje. El siguiente
cap√≠tulo detalla las normas b√°sicas con las que funciona
<emphasis>Wren</emphasis>.</simpara>
<section xml:id="_saltos_de_l√≠nea">
<title>Saltos de l√≠nea</title>
<simpara><emphasis>Wren</emphasis> utiliza los saltos de l√≠nea (<literal>\n</literal>), por lo que no es necesario utilizar el punto y coma (<literal>;</literal>) para separar instrucciones. Sin embargo omite los saltos de l√≠nea si la instrucci√≥n espera m√°s informaci√≥n para ser v√°lida.</simpara>
<section xml:id="_ejemplo_lista_de_elementos">
<title>Ejemplo: Lista de elementos</title>
<programlisting language="js" linenumbering="numbered">var animales = [
  "perro",
  "gato",
  "condor",
  "huemul"
]</programlisting>
</section>
<section xml:id="_ejemplo_par√°metros_de_un_m√©todo">
<title>Ejemplo: Par√°metros de un m√©todo</title>
<programlisting language="js" linenumbering="numbered"> MiClase.metodo(
       parametro1,
       parametro2,
       parametro3
 )</programlisting>
</section>
<section xml:id="_ejemplo_generar_un_n√∫mero_al_azar_del_0_al_9">
<title>Ejemplo: Generar un n√∫mero al azar del 0 al 9</title>
<simpara>Al considerar los saltos de l√≠nea significativos,
provoca un comportamiento inusual al momento de llamar m√©todos.</simpara>
<literallayout class="monospaced">Los n√∫meros pseudo aleatorios son generados utilizando la clase Random. Para generar un n√∫mero del 0 al 9 se necesita utilizar 10, ya que el n√∫mero m√°ximo utilizado no est√° incluido dentro de la secuencia. Es decir se incluye 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 (total 10 n√∫meros) dentro de los posibles resultados.</literallayout>
<simpara>Instrucci√≥n en una sola l√≠nea.</simpara>
<programlisting language="js" linenumbering="numbered">Random.new().int(10)</programlisting>
<simpara>Esto no es v√°lido en <emphasis>Wren</emphasis> (Pero si es v√°lido en la mayor√≠a de los lenguajes de programaci√≥n).</simpara>
<programlisting language="js" linenumbering="numbered">Random
.new()
.int(10)</programlisting>
<simpara>Para ser v√°lido necesitamos poner un punto al final de la l√≠nea.</simpara>
<programlisting language="js" linenumbering="numbered">Random.
new().
int(10)</programlisting>
<simpara>Este comportamiento inusual espera ser reparado en la versi√≥n <literal>0.4</literal>.</simpara>
</section>
<section xml:id="_ejemplo_error">
<title>Ejemplo: <emphasis role="strong">Error</emphasis></title>
<simpara>La siguiente l√≠nea arroja error debido a que no tiene un salto de l√≠nea o una operaci√≥n.</simpara>
<programlisting language="js" linenumbering="numbered">Random.new().int(10) Random.new().int(10)</programlisting>
</section>
</section>
<section xml:id="_palabras_reservadas">
<title>Palabras Reservadas</title>
<simpara><emphasis>Wren</emphasis> es un lenguaje simple y peque√±o. Sus palabras reservadas son las siguientes:</simpara>
<programlisting language="js" linenumbering="numbered">break class construct else false for foreign if import
in is null return static super this true var while</programlisting>
<section xml:id="_caracteres_significativos">
<title>Caracteres significativos</title>
<itemizedlist>
<listitem>
<simpara>Caracteres comunes (<literal>+ - * / % &lt; &gt; = ! ( ) [ ] | . " { } , &amp; ^ ? : ~ _</literal>)</simpara>
</listitem>
<listitem>
<simpara>Retorno de carro (<literal>\n</literal>)</simpara>
</listitem>
</itemizedlist>
</section>
</section>
<section xml:id="_comentarios">
<title>Comentarios</title>
<simpara>Los comentarios utilizan la misma sintaxis que el <link xl:href="https://es.wikipedia.org/wiki/C_(lenguaje_de_programaci%C3%B3n)"><literal>Lenguaje de Programaci√≥n C</literal></link>.</simpara>
<simpara>Los s√≠mbolos son los siguientes: <literal>/* */</literal> (multi l√≠nea) y <literal>//</literal> (l√≠nea √∫nica).</simpara>
<programlisting language="js" linenumbering="numbered">// Comentario de una sola l√≠nea

/*
Este comentario
tiene m√∫ltiples
l√≠neas
*/</programlisting>
<simpara>Se pueden anidar los comentarios. √∫til para comentar c√≥digo que ya tenga comentarios.</simpara>
<programlisting language="js" linenumbering="numbered">/*
Este comentario
tiene m√∫ltiples
l√≠neas.
  /* Tambi√©n puedes incluir comentarios,
  dentro de comentarios multi l√≠nea.
  */
*/</programlisting>
<section xml:id="_tip_comentarios_tijera">
<title>Tip: Comentarios Tijera</title>
<simpara>Puedes combinar los comentarios de una sola l√≠nea con los de m√∫ltiples l√≠neas para
comentar/descomentar r√°pidamente secciones de c√≥digo. Se llaman comentarios tijera
por que pueden "cortar" un c√≥digo para no ser ejecutado.</simpara>
<programlisting language="js" linenumbering="numbered">// /*
   codigo()
// */</programlisting>
<simpara>Al eliminar el comentario de la primera l√≠nea, el c√≥digo ser√° comentado. De esta forma r√°pidamente
puedes activar o desactivar secciones de c√≥digo.</simpara>
<programlisting language="js" linenumbering="numbered">/*
   codigo()
// */</programlisting>
<simpara>Puede a√∫n ser m√°s simplificado de esta forma</simpara>
<programlisting language="js" linenumbering="numbered">//*
   codigo()
// */</programlisting>
<simpara>Si se elimina el primer <literal>/</literal> el c√≥digo ser√° comentado. Por lo que se ahorra un par de movimientos al realizar el comentario.</simpara>
<programlisting language="js" linenumbering="numbered">/*
   codigo()
// */</programlisting>
</section>
<section xml:id="_tip_comentarios_de_par√°metros">
<title>Tip: Comentarios de par√°metros</title>
<simpara>En <emphasis>Wren</emphasis> no es posible llamar a los par√°metros por su nombre. Por lo que si utilizas una funci√≥n
con algunos par√°metros, puede ser √∫til comentarlos.</simpara>
<programlisting language="js" linenumbering="numbered">circulo(/* x */ 10, /* y */ 20, /* radio */ 10)</programlisting>
<simpara>O mejor a√∫n utilizar variables con nombres significativos</simpara>
<programlisting language="js" linenumbering="numbered">var x = 10
var y = 20
var radio = 10
circulo(x, y, radio)</programlisting>
</section>
</section>
<section xml:id="_identificadores">
<title>Identificadores</title>
<simpara>Similar al <emphasis>Lenguaje C</emphasis>, para los indentificadores (nombres de variables, clases, metodos, funciones) se pueden utilizar los caracteres de la <link xl:href="http://www.asciitable.com/">lista <literal>ascii</literal></link> y comenzar con un caracter alfab√©tico o gui√≥n bajo. Los identificadores en <emphasis>Wren</emphasis> diferencian entre may√∫sculas y min√∫sculas. Solo se permiten letras (<literal>A - Z</literal>, <literal>a - z</literal>), n√∫meros (<literal>0 - 9</literal>) y gui√≥n bajo (<literal>_</literal>). No se permiten espacios o comenzar con un n√∫mero o gui√≥n alto (<literal>-</literal>).</simpara>
<section xml:id="_ejemplo_de_identificadores_v√°lidos">
<title>Ejemplo de Identificadores v√°lidos</title>
<programlisting language="js" linenumbering="numbered">hola
camelCase
PascalCase
_under_score
abc123
TODAS_MAYUSCULAS</programlisting>
</section>
<section xml:id="_ejemplo_de_identificadores_no_v√°lidos">
<title>Ejemplo de Identificadores no v√°lidos</title>
<screen linenumbering="numbered">13hola
mi-variable
$miVariable
mi variable
√±and√∫
üë®miMetodo
Miüë©clase</screen>
</section>
<section xml:id="_unicode">
<title>Unicode</title>
<simpara>No est√°n permitidos caracteres <link xl:href="https://es.wikipedia.org/wiki/UTF-8">UTF-8</link> como la <literal>√ë</literal> o los emojis en los identificadores. Sin embargo las <literal>Strings</literal> las soportan en su contenido sin problemas. Hay lenguajes como <link xl:href="https://swift.org/"><emphasis>Swift</emphasis></link> o <link xl:href="https://www.emojicode.org/">Emoji Code</link> que si soportan identificadores con emojis, aunque la utilidad de esta pr√°ctica es debatible.</simpara>
<simpara>Ejemplo de EmojiCode</simpara>
<screen linenumbering="numbered">üèÅ üçá
  üòÄ üî§Hello World!üî§‚ùóÔ∏è
üçâ</screen>
</section>
<section xml:id="_identificadores_que_inician_con_gui√≥n_bajo">
<title>Identificadores que inician con gui√≥n bajo</title>
<simpara>Un caso especial es para los identificadores con gui√≥n bajo como <literal>_color</literal> (un gui√≥n bajo al principio) y <literal>__sabor</literal> (dos guiones bajos al principio). Con un gui√≥n bajo indica que es una propiedad de instancia, mientras que con dos guiones bajos indican que es una propiedad de clase. M√°s detalles en la secci√≥n de Clases.</simpara>
</section>
<section xml:id="_identificadores_de_clase">
<title>Identificadores de clase</title>
<simpara>Para <emphasis>Wren</emphasis> es importante que las clases comiencen
su nombre con may√∫sculas. Si bien es posible definir clases con letras min√∫sculas no es recomendable hacerlo debido a que pueden colisionar con variables dentro del contexto de clase o m√©todo.</simpara>
<simpara>Ejemplos</simpara>
<programlisting language="js" linenumbering="numbered">// Asociamos la clase `Numero` como un substituto para llamar a la clase `Num`
var Numero = Num</programlisting>
<programlisting language="js" linenumbering="numbered">// Tambi√©n es v√°lido pero no es recomendable
class numero is Num {}</programlisting>
</section>
</section>
</chapter>
<chapter xml:id="_strings_cadena_de_caracteres">
<title><link xl:href="http://wren.io/modules/core/string.html">Strings: Cadena de caracteres</link></title>
<simpara>Las cadenas de caracteres (<emphasis>String</emphasis>) son delimitadas por las comillas dobles (<literal>"</literal>). Pueden ser de una sola l√≠nea o multi l√≠nea. En el caso de ser multi l√≠nea, estas conservar√°n todos los caracteres de espacio y salto de l√≠nea contenidos en el <emphasis>string</emphasis>. El caracter de comilla simple (<literal>'</literal>) no es significativo para <emphasis>Wren</emphasis>.</simpara>
<simpara>Las strings pueden contener caracteres unicode en <link xl:href="http://utf8everywhere.org/">UTF-8</link>, como tambi√©n caracteres no v√°lidos para <emphasis>UTF-8</emphasis>.</simpara>
<simpara>Adem√°s son inmutables. El string <emphasis role="strong">"porotos"</emphasis> no podr√° ser modificado (cambiando sus caracteres) luego de su creaci√≥n.</simpara>
<simpara>Un string puede contener los siguientes valores:</simpara>
<itemizedlist>
<listitem>
<simpara>Una cadena de texto compuesto por una secuencia de puntos de c√≥digo textuales (textual code point).</simpara>
</listitem>
<listitem>
<simpara>Una cadena iterable compuesta por una secuencia de puntos de c√≥digo num√©rico (numeric code point).</simpara>
</listitem>
<listitem>
<simpara>Un arreglo simple de bytes indexeables.</simpara>
</listitem>
</itemizedlist>
<section xml:id="_string_de_una_l√≠nea">
<title>String de una l√≠nea</title>
<programlisting language="js" linenumbering="numbered">"Solo es necesario comillas dobles"</programlisting>
</section>
<section xml:id="_string_multi_l√≠nea">
<title>String multi l√≠nea</title>
<simpara><emphasis>Wren</emphasis> permite string multi l√≠neas utilizando el mismo caracter de comillas dobles (<literal>"</literal>) de las strings de una sola l√≠nea.</simpara>
<programlisting language="js" linenumbering="numbered">"
 Todo esto es una string multi l√≠nea
 Wren esperar√° hasta que aparezca
 la siguiente comilla doble.
 Los strings multi l√≠nea en Wren guardan tanto espacios como saltos de l√≠nea en su interior.
 (no son omitidos).
"</programlisting>
</section>
<section xml:id="_contando_el_largo_del_string">
<title>Contando el largo del string</title>
<simpara>Si utilizamos la propiedad <literal>count</literal> podremos obtener el largo de un string.</simpara>
<simpara>Por ejemplo <literal>"hola".count</literal> devolver√° <literal>4</literal>. Hay que tener cuidado con los caracteres unicode (emojis), ya que el largo depender√° de lo que se est√© contando. <emphasis>Wren</emphasis> cuenta los puntos de c√≥digo (code point) unicode, por que todos los strings est√°n bajo <emphasis>UTF-8</emphasis> (similar al comportamiento de <link xl:href="https://www.ruby-lang.org/en/"><emphasis>Ruby</emphasis></link> y <link xl:href="https://www.python.org/"><emphasis>Python 3</emphasis></link>).</simpara>
<programlisting language="js" linenumbering="numbered">System.print("a".count) // Retorna 1.
System.print("a".bytes.count) // Retorna 1 (Parte de la tabla ASCII original).

System.print("√±".count) // Retorna 1.
System.print("√±".bytes.count) // Retorna 2.

System.print("üëπ".count) // Retorna 1.
System.print("üëπ".bytes.count) // Retorna 4.

System.print("üë®‚Äçüë©‚Äçüëß‚Äçüë¶".count) // Retorna 7 al contar la unidades de c√≥digo de Unicode
System.print("üë®‚Äçüë©‚Äçüëß‚Äçüë¶".bytes.count) // Retorna 25 al contar los bytes UTF-8</programlisting>
<simpara><literal>System.print("üë®‚Äçüë©‚Äçüëß‚Äçüë¶".count)</literal> retorna 7 por que se est√° contando las unidades de c√≥digo de unicode, es decir, el emoji üë®‚Äçüë©‚Äçüëß‚Äçüë¶ est√° formado por los siguientes caracteres : üë® + caracter de uni√≥n de ancho cero + üë© + caracter de uni√≥n de ancho cero + üëß + caracter de uni√≥n de ancho cero + üë¶.</simpara>
<simpara><literal>System.print("üë®‚Äçüë©‚Äçüëß‚Äçüë¶".bytes.count)</literal> retorna 25 por que est√° contando los bytes necesarios para almacenar estos caracteres. bytes es una secuencia de caracteres en C, lo que permite utilizar los Strings para almacenar informaci√≥n en binario.</simpara>
<simpara>Hay dos formas de contar adicionales que <emphasis>Wren</emphasis> no soporta. La primera es contar por unidades de c√≥digo <emphasis>UTF-16</emphasis> y la otra es considerar los emojis compuestos como una unidad.</simpara>
<simpara>El string "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" deber√≠a ser de largo 11 para la codificaci√≥n <emphasis>UTF-16</emphasis>. Mientras que deber√≠a ser de largo 1 si lo consideramos como un caracter singular (lo que percibe el usuario). Seg√∫n los amigos de <link xl:href="http://utf8everywhere.org/">UTF-8 Everywhere</link> contar de estas formas es poco productivo, ya que lo que importa es realmente los code units (unidades de c√≥digo) <emphasis>UTF-8</emphasis> que se tiene al escribir un string. Por lo que <emphasis>Wren</emphasis> tiene un comportamiento adecuado. De todas formas ese tipo de conversiones y conteo podr√≠a programarse con c√≥digos externos a <emphasis>Wren</emphasis>. M√°s detalles en el <link xl:href="https://www.unicode.org/glossary/">Glosario Unicode</link>.</simpara>
</section>
<section xml:id="_uni√≥n_e_interpolaci√≥n_de_strings">
<title>Uni√≥n e interpolaci√≥n de strings</title>
<simpara>Si deseamos unir varios strings o incluir datos dentro de ellos podemos utilizar las siguientes operaciones: <literal>+</literal> y <literal>%()</literal>.</simpara>
<itemizedlist>
<listitem>
<simpara><literal>"Hola" + "Wren"</literal>: Crea un nuevo string con la uni√≥n de <literal>Hola</literal> y <literal>Wren</literal>. Entregar√° <literal>HolaWren</literal>. Es necesario que ambos objetos sean strings. Por ejemplo si se utiliza <literal>"Hola" + 1</literal> entregar√° un error similar a <literal>Runtime error: Right operand must be a string.</literal>. Para poder unirlos tendremos que utiliza el m√©todo getter <literal>toString</literal> del n√∫mero. <literal>"Hola" + 1.toString</literal>, retornando <literal>Hola1</literal>.</simpara>
</listitem>
</itemizedlist>
<simpara>El m√©todo <literal>toString</literal> es parte de la clase <link xl:href="http://wren.io/modules/core/object.html"><literal>Object</literal></link> la cual es la padre de todos los tipos de datos en <emphasis>Wren</emphasis>. Tanto n√∫meros, booleanos, strings y listas son objetos que heredan de esta clase.</simpara>
<itemizedlist>
<listitem>
<simpara><literal>"Hola %(mundo)"</literal>: Crea un string con la frase <literal>Hola</literal> y el contenido de la variable <literal>mundo</literal>.</simpara>
</listitem>
</itemizedlist>
<simpara>La operaci√≥n <literal>%()</literal> permite incluir cualquier instrucci√≥n <emphasis>Wren</emphasis> v√°lida, la cual finalmente ejecutar√° el m√©todo <literal>toString</literal> para ser incluido en la cadena de caracteres. Esto incluso permite tener interpolaciones anidadas, pero eso se vuelve poco legible r√°pidamente.</simpara>
<programlisting language="js" linenumbering="numbered">// muestra: La respuesta es 42.
System.print("La respuesta es %(20 * 2 + 2).")</programlisting>
</section>
<section xml:id="_multiplicaci√≥n_de_strings">
<title>Multiplicaci√≥n de strings</title>
<simpara>Tambi√©n se pueden multiplicar para repetir la cadena de caracteres una cantidad de veces determinada.</simpara>
<programlisting language="js" linenumbering="numbered">// muestra hola hola hola
System.print("hola " * 3)</programlisting>
<literallayout class="monospaced">Si bien se pueden sumar (_+_) y multiplicar (_*_), no existe operaciones para resta (_-_) y division (_/_) dentro de una cadena de caracteres.</literallayout>
</section>
<section xml:id="_limitar_el_m√°ximo_de_caracteres">
<title>Limitar el m√°ximo de caracteres</title>
<simpara>El <emphasis>String</emphasis> al ser una <emphasis>Secuencia</emphasis> puede utilizar
sus m√©todos como <emphasis>take()</emphasis> que permite obtener los
elementos dentro de una secuencia. El m√©todo <emphasis>join()</emphasis>
es necesario para convertir nuevamente la secuencia
en un <emphasis>String</emphasis>.</simpara>
<programlisting language="js" linenumbering="numbered">// muestra: hola
System.print("hola wren".take(4).join())</programlisting>
</section>
<section xml:id="_caracteres_no_imprimibles">
<title>Caracteres no imprimibles</title>
<simpara>Los caracteres no imprimibles o <emphasis>Whitespace</emphasis> son aquellos
caracteres que el computador puede ver, pero son invisibles
para una persona. Los caracteres no imprimibles m√°s comunes son el espacio (<emphasis>" "</emphasis>), la tabulaci√≥n (<emphasis>"\t"</emphasis>) y el salto de l√≠nea (<emphasis>"\n"</emphasis>). La combinaci√≥n de dos caracteres <emphasis>"\t"</emphasis> crea un nuevo espacio tabulado, mientras que la combinaci√≥n de dos caracteres <emphasis>"\n"</emphasis> crea una nueva l√≠nea dentro del <emphasis>String</emphasis>. ¬°Puedes usarlos cuant√°s veces y d√≥nde desees!.</simpara>
<simpara>Prueba el siguiente c√≥digo:</simpara>
<programlisting language="js" linenumbering="numbered">System.print("Hola a todos")
System.print("\tHola a todos")
System.print("Hola\na todos")
System.print("\n\n\nHola\ta\ttodos")</programlisting>
<section xml:id="_eliminando_caracteres_no_imprimibles">
<title>Eliminando caracteres no imprimibles</title>
<simpara>Muchas veces al solicitar datos a un usuario, este puede incluir espacios adicionales al principio o final. Usualmente es buena idea eliminar estos caracteres no imprimibles antes de comenzar a procesar el dato.</simpara>
<programlisting language="js" linenumbering="numbered">var nombre = " arturo "

// Elimina solamente espacio final
System.print(nombre.trimEnd())

// Elimina solamente espacio inicial
System.print(nombre.trimStart())

// Elimina espacio inicial y final
System.print(nombre.trim())</programlisting>
<simpara>Si se necesita ver con mayor claridad lo que sucede
se puede usar el siguiente c√≥digo:</simpara>
<programlisting language="js" linenumbering="numbered">var nombre = " arturo "

// Elimina solamente espacio final
System.print("-" + nombre.trimEnd() + "-")

// Elimina solamente espacio inicial
System.print("-" + nombre.trimStart() + "-")

// Elimina espacio inicial y final
System.print("-" + nombre.trim() + "-")</programlisting>
</section>
</section>
<section xml:id="_caracteres_de_escape">
<title>Caracteres de escape</title>
<simpara>Muchas veces se necesitan escribir caracteres especiales en un string. Por ejemplo si quisieramos escribir <literal>"Hola Wren"</literal> incluyendo las comillas, tendr√≠amos que escribirlo de esta forma <literal>"\"Hola Wren\""</literal>. Esto incluir√° los caracteres de comillas dobles en la frase.</simpara>
<programlisting language="js" linenumbering="numbered">"\0" // byte NUL (Nulo) : 0.
"\"" // Comillas dobles.
"\\" // Barra invertida.
"\%" // Signo porcentaje.
"\a" // Sonido de alarma.
"\b" // Retroceso.
"\f" // Alimentaci√≥n de formularios.
"\n" // Salto de l√≠nea.
"\r" // Retorno de carro.
"\t" // Tabulaci√≥n.
"\v" // Tabulaci√≥n vertical.</programlisting>
<simpara>Para indicar caracteres especiales podemos utilizar <literal>\u</literal> (unicode para letras disponibles en los idiomas humanos), <literal>\U</literal> (unicode para letras especiales como emoji) y <literal>\x</literal> (bytes sin codificar).</simpara>
<itemizedlist>
<listitem>
<simpara><literal>System.print("\u0041\u0b83\u00DE")</literal> = A‡ÆÉ√û</simpara>
</listitem>
<listitem>
<simpara><literal>System.print("\U0001F64A\U0001F680")</literal> = üôäüöÄ</simpara>
</listitem>
<listitem>
<simpara><literal>System.print("\x48\x69\x2e")</literal> = Hi.</simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="_rangos_de_caracteres">
<title>Rangos de caracteres</title>
<simpara>Un <emphasis>String</emphasis> es una <emphasis>Secuencia</emphasis> de caracteres. Por lo que es posible obtener caracteres en posiciones espec√≠ficas
utilizando rangos (<emphasis>Range</emphasis>). El √≠ndice comieza contando
desde cero para contar desde el principio de la cadena y puede tener valores negativos para contar
desde el final de la cadena.</simpara>
<section xml:id="_caracter_en_posici√≥n_espec√≠fica">
<title>Caracter en posici√≥n espec√≠fica</title>
<programlisting language="js" linenumbering="numbered">// muestra: h
System.print("hola wren"[0])

// muestra: n
System.print("hola wren"[-1])</programlisting>
</section>
<section xml:id="_rango_de_caracteres_dentro_de_una_cadena">
<title>Rango de caracteres dentro de una cadena</title>
<programlisting language="js" linenumbering="numbered">// muestra: la
System.print("hola wren"[2..3])</programlisting>
</section>
<section xml:id="_invertir_una_cadena_de_caracteres">
<title>Invertir una cadena de caracteres</title>
<programlisting language="js" linenumbering="numbered">// muestra: nerw aloh
System.print("hola wren"[-1..0])</programlisting>
</section>
</section>
</chapter>
<chapter xml:id="_ejemplos_de_terminal_en_wren">
<title>Ejemplos de Terminal en Wren</title>
<simpara>Una colecci√≥n de c√≥digo fuente <emphasis>Wren</emphasis> con juegos y aplicaciones simples, basados en texto a modo de ejemplo.</simpara>
<simpara>Basados principalmente en los c√≥digos diponibles en <link xl:href="https://github.com/asweigart/PythonStdioGames">Python Stdio Games</link> y <link xl:href="https://github.com/asweigart/inventwithpython3rded">Invent With Python</link>.</simpara>
<section xml:id="_c√≥mo_ejecutarlos">
<title>¬øC√≥mo ejecutarlos?</title>
<simpara>Primero se necesita el <link xl:href="https://github.com/wren-lang/wren-cli/releases/latest">int√©rprete de Wren</link>. Adem√°s de un editor de c√≥digo como <link xl:href="https://code.visualstudio.com/">Visual Studio Code</link>.</simpara>
<simpara>Para mayor documentaci√≥n sobre la consola y el lenguaje <emphasis>Wren</emphasis> se puede visitar <link xl:href="http://wren.io/cli">http://wren.io/cli</link></simpara>
</section>
<section xml:id="_adivina_el_n√∫mero">
<title>Adivina el N√∫mero</title>
<simpara>Basado en <link xl:href="http://inventwithpython.com/es/4.html">Adivina del N√∫mero</link>.</simpara>
<simpara>En el juego <emphasis>"Adivina el N√∫mero"</emphasis>. La computadora pensar√° un n√∫mero aleatorio entre 1 y 20, y te pedir√° que intentes adivinarlo. La computadora te dir√° si cada intento es muy alto o muy bajo. T√∫ ganas si adivinas el n√∫mero en seis intentos o menos.</simpara>
<simpara>Este es un buen juego para codificar ya que usa n√∫meros aleatorios y bucles, y recibe entradas del usuario en un programa corto. Aprender√°s c√≥mo convertir valores a diferentes tipos de datos, y por qu√© es necesario hacer esto. Dado que este programa es un juego, nos referiremos al usuario como el jugador. Pero llamarlo ‚Äúusuario‚Äù tambi√©n ser√≠a correcto.</simpara>
<section xml:id="_ejemplo_de_ejecuci√≥n">
<title>Ejemplo de Ejecuci√≥n</title>
<simpara><literal>$ ./wren adivina/adivina.wren</literal></simpara>
<programlisting language="sh" linenumbering="numbered">¬°Hola! ¬øC√≥mo te llamas?

Alberto

Bueno, Alberto, estoy pensando en un n√∫mero entre 1 y 20.

Intenta adivinar 1/6.

10

Tu estimaci√≥n es muy alta.

Intenta adivinar 2/6.

2

Tu estimaci√≥n es muy baja.

Intenta adivinar 3/6.

4

¬°Buen trabajo, Alberto! ¬°Has adivinado mi n√∫mero en 3 intentos!</programlisting>
</section>
<section xml:id="_c√≥digo_fuente">
<title>C√≥digo fuente</title>
<programlisting language="js" linenumbering="numbered">// nombre: adivina.wren
// autor: Camilo Castro &lt;camilo@ninjas.cl&gt;
// original: https://github.com/asweigart/inventwithpython3rded/blob/master/translations/es/src/adivinaElN%C3%BAmero.py
// ejecutar: wren adivina/adivina.wren

import "random" for Random
import "io" for Stdin

var random = Random.new()

var intentos = 0
var maxIntentos = 6

System.print("¬°Hola!, ¬øC√≥mo te llamas?")

var nombre = Stdin.readLine()
System.print("Bueno, %(nombre), estoy pensando en un n√∫mero entre 1 y 20.")

// Un n√∫mero aleatorio entre 1 y 20.
// se necesita usar 21 debido a que el generador
// no incluye el √∫ltimo n√∫mero.
var numero = random.int(1, 21)
var estimacion = -1

while (intentos &lt; maxIntentos) {
    intentos = intentos + 1
    System.print("Intenta adivinar %(intentos)/%(maxIntentos)")

    estimacion = Num.fromString(Stdin.readLine())

    if (estimacion is Null) {
        System.print("Solo admito n√∫meros")
    } else if (estimacion &lt; numero) {
        System.print("Tu estimaci√≥n es muy baja")
    } else if (estimacion &gt; numero) {
        System.print("Tu estimaci√≥n es muy alta")
    } else {
        break
    }
}

if (estimacion == numero) {
    System.print("¬°Buen trabajo, %(nombre)! ¬°Haz adivinado mi n√∫mero en %(intentos) intentos!.")
}

if (estimacion != numero) {
    System.print("Pues no. El n√∫mero que estaba pensando era %(numero)")
}</programlisting>
</section>
</section>
<section xml:id="_reino_de_dragones">
<title>Reino de Dragones</title>
<simpara>Basado en <link xl:href="http://inventwithpython.com/es/6.html">Reino de Dragones</link>.</simpara>
<simpara>El juego se llama <emphasis>"Reino de Dragones"</emphasis>, y permite al jugador elegir entre dos cuevas, en una de las cuales encontrar√° un tesoro y en la otra su perdici√≥n.</simpara>
<section xml:id="_c√≥mo_jugar_a_reino_de_dragones">
<title>¬øC√≥mo Jugar a Reino de Dragones?</title>
<simpara>En este juego, el jugador est√° en una tierra llena de dragones. Todos los dragones viven en cuevas junto a sus grandes montones de tesoros encontrados. Algunos dragones son amigables, y compartir√°n sus tesoros contigo. Otros son codiciosos y hambrientos, y se comer√°n a cualquiera que entre a su cueva. El jugador se encuentra frente a dos cuevas, una con un drag√≥n amigable y la otra con un drag√≥n hambriento. El jugador tiene que elegir entre las dos.</simpara>
</section>
<section xml:id="_ejemplo_de_ejecuci√≥n_2">
<title>Ejemplo de Ejecuci√≥n</title>
<simpara><literal>$ ./wren dragon/dragon.wren</literal></simpara>
<programlisting language="sh" linenumbering="numbered">Est√°s en una tierra llena de dragones. Frente a t√≠
hay dos cuevas. En una de ellas, el drag√≥n es generoso y amigable y compartir√° su tesoro contigo. El otro drag√≥n
es codicioso y est√° hambriento, y te devorar√° inmediatamente.

¬øA qu√© cueva quieres entrar? (1 √≥ 2)
1

Te aproximas a la cueva...
Es oscura y espeluznante...
¬°Un gran dragon aparece s√∫bitamente frente a t√≠! Abre sus fauces y...

¬°Te engulle de un bocado!

¬øQuieres jugar de nuevo? (s√≠ or no)

no</programlisting>
</section>
<section xml:id="_c√≥digo_fuente_2">
<title>C√≥digo fuente</title>
<programlisting language="js" linenumbering="numbered">// nombre: dragon.wren
// autor: Camilo Castro &lt;camilo@ninjas.cl&gt;
// original: https://github.com/asweigart/inventwithpython3rded/blob/master/translations/es/src/drag%C3%B3n.py
// ejecutar: wren dragon/dragon.wren

import "random" for Random
import "timer" for Timer
import "io" for Stdin

var random = Random.new()

var mostrarIntroduccion = Fn.new {
  System.print("Est√°s en una tierra llena de dragones. Frente a t√≠")
  System.print("hay dos cuevas. En una de ellas, el drag√≥n es generoso y")
  System.print("amigable y compartir√° su tesoro contigo. El otro drag√≥n")
  System.print("es codicioso y est√° hambriento, y te devorar√° inmediatamente.")
  System.print()
  }

  var elegirCueva = Fn.new {
  var cueva = null
  var primerDragon = "1"
  var segundoDragon = "2"

  while (cueva != primerDragon &amp;&amp; cueva != segundoDragon) {
    System.print("¬øA qu√© cueva quieres entrar? (1 √≥ 2)")
    cueva = Stdin.readLine()
  }
  return cueva
}

var explorarCueva = Fn.new { |cueva|
    // existen 1000 millisegundos en un segundo
    // por lo que para obtener 2 segundos
    // debemos multiplicar 2 * 1000
    var dosSegundos = 2 * 1000

    System.print("Te aproximas a la cueva...")
    Timer.sleep(dosSegundos)

    System.print("Es oscura y espeluznante...")
    Timer.sleep(dosSegundos)

    System.print("¬°Un gran dragon aparece s√∫bitamente frente a t√≠! Abre sus fauces y...")
    System.print()
    Timer.sleep(dosSegundos)

    // Un n√∫mero aleatorio entre 1 y 2.
    // se necesita usar 3 debido a que el generador
    // no incluye el √∫ltimo n√∫mero
    var cuevaAmigable = random.int(1, 3).toString

    if (cueva == cuevaAmigable) {
      System.print("¬°Te regala su tesoro!")
    } else {
      System.print("¬°Te engulle de un bocado!")
    }

    System.print()
}

var jugarDeNuevo = "s√≠"
while (jugarDeNuevo == "s√≠" || jugarDeNuevo == "si" || jugarDeNuevo == "s") {
  mostrarIntroduccion.call()
  var cueva = elegirCueva.call()
  explorarCueva.call(cueva)

  System.print("¬øQuieres jugar de nuevo? (s√≠ o no)")
  jugarDeNuevo = Stdin.readLine()
}

System.print("¬°Eso fue divertido, nos vemos luego!")</programlisting>
</section>
</section>
<section xml:id="_diamantes">
<title>Diamantes</title>
<simpara>Esta es una simple aplicaci√≥n creativa que muestra
diamantes de distintos tama√±os.
Basado en <link xl:href="https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/diamonds.py">Diamonds</link>.</simpara>
<section xml:id="_ejemplo_de_ejecuci√≥n_3">
<title>Ejemplo de Ejecuci√≥n</title>
<simpara><literal>./wren diamantes/diamantes.wren</literal></simpara>
<programlisting language="sh" linenumbering="numbered">/\
\/

/\
\/

 /\
/  \
\  /
 \/
...</programlisting>
</section>
<section xml:id="_c√≥digo_fuente_3">
<title>C√≥digo fuente</title>
<programlisting language="js" linenumbering="numbered">/*
Diamantes, por Al Sweigart &lt;al@inventwithpython.com&gt;
https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/diamonds.py
Dibuja diamantes de varios tama√±os.
Adaptado a Wren por Camilo Castro &lt;camilo@ninjas.cl&gt;
https://github.com/NinjasCL/wren-libro/blob/main/juegos/diamantes/diamantes.wren
- Tags: tiny, beginner, artistic, peque√±o, novato, artistico
- Version: 1.0.0
*/

var mostrarDiamanteLineal = Fn.new { |dimension|
  // Mostrar la parte superior del diamante
  for (i in 0...dimension) {
    // Espacio izquierdo
    System.write(" " * (dimension - i - 1))
    // Parte izquierda del diamante
    System.write("/")
    // Espacio interior del diamante
    System.write(" " * (i * 2))
    // Parte derecha del diamante
    System.print("\\")
  }

  // Mostrar la parte inferior del diamante
  for (i in 0...dimension) {
    // Espacio izquierdo
    System.write(" " * i)
    // Lado izquierdo
    System.write("\\")
    // Espacio interior
    System.write(" " * ((dimension - i - 1) * 2))
    // Lado derecho
    System.print("/")
  }
}

var mostrarDiamanteRelleno = Fn.new { |dimension|
  // Mostrar la cara superior del diamante
  for (i in 0...dimension) {
    // Espaciado izquierdo
    System.write(" " * (dimension - i - 1))
    // Lado izquierdo
    System.write("/" * (i + 1))
    // Lado derecho
    System.print("\\" * (i + 1))
  }

  // Mostrar la cara inferior del diamante
  for (i in 0...dimension) {
    // Espaciado izquierdo
    System.write(" " * i)
    // Lado izquierdo
    System.write("\\" * (dimension - i))
    // Lado derecho
    System.print("/" * (dimension - i))
  }
}

// Muestra 5 diamantes de tama√±o 0 al 5:
for(dimension in 0..5) {
  mostrarDiamanteLineal.call(dimension)
  System.print()
  mostrarDiamanteRelleno.call(dimension)
  System.print()
}</programlisting>
</section>
</section>
<section xml:id="_carrera_de_caracoles">
<title>Carrera de Caracoles</title>
<simpara>Una alucinante carrera entre 2 a 8 caracoles.
Basado en <link xl:href="https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/snailrace.py">SnailRace</link>.</simpara>
<section xml:id="_ejemplo_de_ejecuci√≥n_4">
<title>Ejemplo de Ejecuci√≥n</title>
<simpara><literal>$ ./wren caracoles/caracoles.wren</literal></simpara>
<screen linenumbering="numbered">La gran carrera de caracoles

    @v &lt;-- caracol


¬øCu√°ntos caracoles correr√°n? Min:2 Max:8
2
Ingresa el nombre del caracol #1:
Ana
Ingresa el nombre del caracol #2:
Berto

INICIO                                  META
|                                       |
                                     Ana
.....................................@v
                                       Berto
.......................................@v
¬°Ha ganado Berto!</screen>
</section>
<section xml:id="_c√≥digo_fuente_4">
<title>C√≥digo fuente</title>
<programlisting language="js" linenumbering="numbered">/*
Snail Race, por Al Sweigart &lt;al@inventwithpython.com&gt;
https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/snailrace.py
Una carrera de caracoles, ¬°alucinante!.
Adaptado a Wren por Camilo Castro &lt;camilo@ninjas.cl&gt;
https://github.com/NinjasCL/wren-libro/blob/main/juegos/caracoles/caracoles.wren
- Tags: short, beginner, artistic, corto, novato, artistico
- Version: 1.0.0
*/
import "random" for Random
import "timer" for Timer
import "io" for Stdin

var random = Random.new()

class Constantes {
  static minCaracoles { 2 }
  static maxCaracoles { 8 }
  static maxLargoNombre { 20 }
  static meta { 40 }
}


System.print("
La gran carrera de caracoles

    @v &lt;-- caracol

")

var cantidad = null

while (true) {
  System.print("¬øCu√°ntos caracoles correr√°n? Min:%(Constantes.minCaracoles) Max:%(Constantes.maxCaracoles)")
  cantidad = Num.fromString(Stdin.readLine())
  if (cantidad &amp;&amp; cantidad &gt;= Constantes.minCaracoles &amp;&amp; cantidad &lt;= Constantes.maxCaracoles) {
    break
  }
  System.print("Ingresar un n√∫mero entre %(Constantes.minCaracoles) y %(Constantes.maxCaracoles)")
}

var nombres = []

for (i in 1..cantidad) {
  var nombre = ""
  while (true) {

    System.print("Ingresa el nombre del caracol #%(i):")
    nombre = Stdin.readLine()

    // Reducimos el nombre a su largo m√°ximo
    nombre = nombre.take(Constantes.maxLargoNombre).join()

    if (nombre.count == 0) {
      System.print("Por favor ingresa un nombre.")
    } else if (nombres.contains(nombre)) {
      System.print("Nombre ya existe")
    } else {
      break
    }
  }
  nombres.add(nombre)
}

System.print("\n" * 40)
System.print("INICIO" + " " * (Constantes.meta - "INICIO".count) + "META")
System.print("|" + " " * (Constantes.meta - "|".count) + "|")

var caracoles = {}

for (nombre in nombres) {
  System.print(nombre)
  System.print("@v")
  caracoles[nombre] = 0
}

// 1.5 segundos
Timer.sleep(15 * 100)

while (true) {

  for (i in 0..(random.int(1, cantidad + 1))) {
    var nombre = random.sample(nombres)
    caracoles[nombre] = caracoles[nombre] + 1

    if (caracoles[nombre] &gt;= Constantes.meta) {
      System.print("¬°Ha ganado %(nombre)!")
      // Terminar el proceso del juego
      Fiber.yield()
    }
  }

  // 0.5 segundos
  Timer.sleep(500)

  System.print("\n" * 40)
  System.print("INICIO" + " " * (Constantes.meta - "INICIO".count) + "META")
  System.print("|" + " " * (Constantes.meta - "|".count) + "|")

  for (nombre in nombres) {
    var espacios = caracoles[nombre]
    System.print(" " * espacios + nombre)
    System.print("." * espacios + "@v")
  }
}</programlisting>
</section>
</section>
</chapter>
<chapter xml:id="_soluciones_a_ejercicios">
<title>Soluciones a Ejercicios</title>
<simpara>Las siguientes son las soluciones a los ejercicios planteados en el libro. No necesariamente son la √∫nica forma de resolverlos. Se recomienda intentar resolver los ejercicios antes de ver las soluciones.</simpara>
<section xml:id="_cap√≠tulo_1">
<title>Cap√≠tulo 1</title>
<simpara><xref linkend="ex-c1-e1"/></simpara>
<formalpara>
<title>Ejecuci√≥n</title>
<para><literal>$ ./wren hola.wren</literal></para>
</formalpara>
<formalpara>
<title>Salida</title>
<para>
<screen linenumbering="numbered">¬°Hola Wren!</screen>
</para>
</formalpara>
<formalpara>
<title>C√≥digo</title>
<para>
<programlisting language="js" linenumbering="numbered">// muestra: ¬°Hola Wren!
System.print("¬°Hola Wren!")</programlisting>
</para>
</formalpara>
</section>
</chapter>
<glossary xml:id="_glosario">
<title>Glosario</title>
<simpara>Lista de conceptos utilizados a lo largo de este documento.</simpara>
<glossentry>
<glossterm>class</glossterm>
<glossdef>
<simpara>Significa <emphasis>"clase"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>call</glossterm>
<glossdef>
<simpara>Significa <emphasis>"llamar"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>construct</glossterm>
<glossdef>
<simpara>Significa <emphasis>"constructor"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>object</glossterm>
<glossdef>
<simpara>Significa <emphasis>"objeto"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>start</glossterm>
<glossdef>
<simpara>Inicio, principio, comienzo.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>end</glossterm>
<glossdef>
<simpara>Fin, t√©rmino, final.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>each</glossterm>
<glossdef>
<simpara>Palabra que significa <emphasis>"cada uno"</emphasis>. Usado en ciclos iterativos para evaluar cada uno de los elementos.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>for</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"para"</emphasis>. Usada dentro de los bucles y en conjunto a la instruacci√≥n <emphasis>"import"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>foreign</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"extranjero"</emphasis>. Usada para indicar que la clase, propiedad o variable ser√° implementada fuera de <emphasis>Wren</emphasis>. Normalmente cuando se necesita utilizar c√≥digo en otros lenguajes como <emphasis>C</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>false</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"falso"</emphasis>. Usado para indicar una condici√≥n no se est√° cumpliendo. Su contraparte es la instrucci√≥n <emphasis>"true"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>fiber</glossterm>
<glossdef>
<simpara>Significa <emphasis>"fibra"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>fn</glossterm>
<glossdef>
<simpara>Significa <emphasis>"funci√≥n"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>funci√≥n</glossterm>
<glossdef>
<simpara>Bloque de c√≥digo que puede ser ejecutado en distintos puntos del ciclo de vida del c√≥digo. Tambi√©n puede ser asignado a variables.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>new</glossterm>
<glossdef>
<simpara>Significa <emphasis>"nuevo"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>print</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"mostrar"</emphasis> o <emphasis>"imprimir"</emphasis>. Usado para mostrar un valor.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>par√°metro</glossterm>
<glossdef>
<simpara>Son variables que son enviados a las funciones. Pueden ser por valor o por referencia.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>static</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"est√°tico"</emphasis>. Usado para indicar que una propiedad o m√©todo de una clase no necesita una instancia para ser invocado.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>string</glossterm>
<glossdef>
<simpara>Significa <emphasis>"cadena de caracteres"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>int</glossterm>
<glossdef>
<simpara>Significa <emphasis>"n√∫mero entero"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>float</glossterm>
<glossdef>
<simpara>Significa <emphasis>"n√∫mero decimal con punto flotante"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>random</glossterm>
<glossdef>
<simpara>Signfica <emphasis>"aleatorio"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>num</glossterm>
<glossdef>
<simpara>Significa <emphasis>"n√∫mero"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>true</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"verdadero"</emphasis>. Usado para indica una condici√≥n que si se cumple. Su contraparte es la instrucci√≥n <emphasis>"false"</emphasis>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>trim</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"cortar"</emphasis>. Usado para eliminar caracteres dentro de un string.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>import</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"incluir"</emphasis>. Obtener datos desde un archivo e incluir sus contenidos en el contexto.
Ejemplo <literal>import "random" for Random</literal>.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>if</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"si"</emphasis>. Permite crear una condicional y controlar el flujo de datos dentro de un programa.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>is</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"es"</emphasis>. Permite evaluar si un objeto es miembro de un tipo de clase.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>else</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"en otro caso"</emphasis>. Normalmente usado para indicar una condici√≥n alternativa si la condici√≥n <emphasis>"if"</emphasis> principal no se cumple.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>var</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"variable"</emphasis>. Usado para declarar una nueva variable.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>while</glossterm>
<glossdef>
<simpara>Instrucci√≥n que significa <emphasis>"mientras"</emphasis>. Usada dentro de los bucles.</simpara>
</glossdef>
</glossentry>
<glossentry>
<glossterm>write</glossterm>
<glossdef>
<simpara>Instrucci√≥n que signiica <emphasis>"escribir"</emphasis>.</simpara>
</glossdef>
</glossentry>
</glossary>
<bibliography xml:id="_bibliograf√≠a">
<title>Bibliograf√≠a</title>
<simpara>Una lista de recursos complementarios y referenciales.</simpara>
<bibliodiv>
<title>Libros</title>
<bibliomixed>
<bibliomisc><anchor xml:id="inventwithpython" xreflabel="[inventwithpython]"/> Albert Sweigart. 'Inventa tus Propios Juegos de computadora con Python'. <link xl:href="http://inventwithpython.com/es">http://inventwithpython.com/es</link>. ISBN 978-1514370926</bibliomisc>
</bibliomixed>
</bibliodiv>
<bibliodiv>
<title>Sitios Web</title>
<bibliomixed>
<bibliomisc><anchor xml:id="introtopython" xreflabel="[introtopython]"/> Eric Matthes. 'Introduction to Python' <link xl:href="https://github.com/ehmatthes/intro_programming">https://github.com/ehmatthes/intro_programming</link></bibliomisc>
</bibliomixed>
<bibliomixed>
<bibliomisc><anchor xml:id="googlepython" xreflabel="[googlepython]"/> Google. 'Python Class' <link xl:href="http://code.google.com/edu/languages/google-python-class/">http://code.google.com/edu/languages/google-python-class/</link></bibliomisc>
</bibliomixed>
</bibliodiv>
</bibliography>
<index xml:id="_√≠ndice">
<title>√çndice</title>

</index>
<colophon xml:id="_colof√≥n">
<title>Colof√≥n</title>
<simpara>Escrito por <link xl:href="https://ninjas.cl">Camilo Castro</link> y <link xl:href="https://github.com/ninjascl/wren-adventures/graphs/contributors">colaboradores</link>. Para <link xl:href="https://ninjas.cl">Ninjas.cl</link>.</simpara>
<simpara>Esta obra est√° bajo una <link xl:href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Atribuci√≥n-No-Comercial-Compartir-Igual 4.0 Internacional</link></simpara>
<simpara><link xl:href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><inlinemediaobject></link></simpara>
</colophon>
</book>