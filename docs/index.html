<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="description" content="Un libro sobre el lenguaje de programación Wren.">
<meta name="keywords" content="wren, programación, lenguaje, referencia">
<meta name="author" content="Camilo A. Castro">
<meta name="copyright" content="CC-BY-NC-SA 4.0">
<title>El Wren libro</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>El <em>Wren</em> libro</h1>
<div class="details">
<span id="author" class="author">Camilo A. Castro</span><br>
<span id="email" class="email"><a href="https://github.com/clsource">@clsource</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de Contenidos</div>
<ul class="sectlevel1">
<li><a href="#_prefacio">Prefacio</a></li>
<li><a href="#_dedicatoria">Dedicatoria</a></li>
<li><a href="#_pequeña_historia_de_wren">1. Pequeña Historia de <em>Wren</em></a>
<ul class="sectlevel2">
<li><a href="#_qué_es_un_wren">1.1. ¿Qué es un <em>Wren</em>?</a></li>
<li><a href="#_por_qué_aprender_wren">1.2. ¿Por qué aprender <em>Wren</em>?</a></li>
<li><a href="#_cómo_usar_wren">1.3. ¿Cómo usar <em>Wren</em>?</a></li>
<li><a href="#_wren_cli">1.4. Wren CLI</a>
<ul class="sectlevel3">
<li><a href="#_operaciones_matemáticas">1.4.1. Operaciones Matemáticas</a></li>
<li><a href="#_system_print">1.4.2. System.print()</a></li>
<li><a href="#_errores">1.4.3. Errores</a></li>
<li><a href="#_ejecución_de_archivos">1.4.4. Ejecución de archivos</a></li>
<li><a href="#_códigos_de_salida_exit_code">1.4.5. Códigos de salida (Exit code)</a></li>
</ul>
</li>
<li><a href="#_ejercicios">1.5. Ejercicios</a>
<ul class="sectlevel3">
<li><a href="#chap1-ex1">1.5.1. ¡Hola Wren!</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_nociones_básicas">2. Nociones Básicas</a>
<ul class="sectlevel2">
<li><a href="#_tipos_de_datos">2.1. Tipos de datos</a></li>
<li><a href="#_variables">2.2. Variables</a></li>
<li><a href="#_identificadores">2.3. Identificadores</a>
<ul class="sectlevel3">
<li><a href="#_ejemplo_de_identificadores_válidos">2.3.1. Ejemplo de Identificadores válidos</a></li>
<li><a href="#_ejemplo_de_identificadores_no_válidos">2.3.2. Ejemplo de Identificadores no válidos</a></li>
<li><a href="#_unicode">2.3.3. Unicode</a></li>
<li><a href="#_identificadores_que_inician_con_guión_bajo">2.3.4. Identificadores que inician con guión bajo</a></li>
<li><a href="#_identificadores_de_clase">2.3.5. Identificadores de clase</a></li>
<li><a href="#_recomendaciones">2.3.6. Recomendaciones</a></li>
</ul>
</li>
<li><a href="#_saltos_de_línea">2.4. Saltos de línea</a>
<ul class="sectlevel3">
<li><a href="#_ejemplo_lista_de_elementos">2.4.1. Ejemplo: Lista de elementos</a></li>
<li><a href="#_ejemplo_parámetros_de_un_método">2.4.2. Ejemplo: Parámetros de un método</a></li>
<li><a href="#_ejemplo_condicionales">2.4.3. Ejemplo: Condicionales</a></li>
<li><a href="#_ejemplo_generar_un_número_al_azar_del_0_al_9">2.4.4. Ejemplo: Generar un número al azar del 0 al 9</a></li>
<li><a href="#_ejemplo_error">2.4.5. Ejemplo: <strong>Error</strong></a></li>
</ul>
</li>
<li><a href="#_retorno_implícito">2.5. Retorno implícito</a></li>
<li><a href="#_palabras_reservadas">2.6. Palabras Reservadas</a>
<ul class="sectlevel3">
<li><a href="#_caracteres_significativos">2.6.1. Caracteres significativos</a></li>
</ul>
</li>
<li><a href="#_funciones_fn">2.7. Funciones (<em>Fn</em>)</a></li>
<li><a href="#_fibras_fiber">2.8. Fibras (<em>Fiber</em>)</a></li>
<li><a href="#_clases_class">2.9. Clases (<em>class</em>)</a></li>
<li><a href="#_control_de_flujo">2.10. Control de Flujo</a></li>
<li><a href="#_importar">2.11. Importar</a></li>
<li><a href="#_object">2.12. Object</a></li>
<li><a href="#_comentarios">2.13. Comentarios</a>
<ul class="sectlevel3">
<li><a href="#_tip_comentarios_tijera">2.13.1. Tip: Comentarios Tijera</a></li>
<li><a href="#_tip_comentarios_de_parámetros">2.13.2. Tip: Comentarios de parámetros</a></li>
<li><a href="#_cómo_es_un_buen_comentario">2.13.3. ¿Cómo es un buen comentario?</a></li>
<li><a href="#_cuándo_comentar">2.13.4. ¿Cuándo comentar?</a></li>
</ul>
</li>
<li><a href="#_límites">2.14. Límites</a></li>
</ul>
</li>
<li><a href="#_strings_cadena_de_caracteres">3. Strings: Cadena de caracteres</a>
<ul class="sectlevel2">
<li><a href="#_string_de_una_línea">3.1. String de una línea</a></li>
<li><a href="#_string_multi_línea">3.2. String multi línea</a></li>
<li><a href="#_contando_el_largo_del_string">3.3. Contando el largo del string</a></li>
<li><a href="#_unión_e_interpolación_de_strings">3.4. Unión e interpolación de strings</a></li>
<li><a href="#_multiplicación_de_strings">3.5. Multiplicación de strings</a></li>
<li><a href="#_limitar_el_máximo_de_caracteres">3.6. Limitar el máximo de caracteres</a></li>
<li><a href="#_caracteres_no_imprimibles">3.7. Caracteres no imprimibles</a>
<ul class="sectlevel3">
<li><a href="#_eliminando_caracteres_no_imprimibles">3.7.1. Eliminando caracteres no imprimibles</a></li>
</ul>
</li>
<li><a href="#_caracteres_de_escape">3.8. Caracteres de escape</a></li>
<li><a href="#_rangos_de_caracteres">3.9. Rangos de caracteres</a>
<ul class="sectlevel3">
<li><a href="#_caracter_en_posición_específica">3.9.1. Caracter en posición específica</a></li>
<li><a href="#_rango_de_caracteres_dentro_de_una_cadena">3.9.2. Rango de caracteres dentro de una cadena</a></li>
<li><a href="#_invertir_una_cadena_de_caracteres">3.9.3. Invertir una cadena de caracteres</a></li>
</ul>
</li>
<li><a href="#_ejercicios_2">3.10. Ejercicios</a>
<ul class="sectlevel3">
<li><a href="#chap3-ex1">3.10.1. Donas</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_num_números">4. Num: Números</a>
<ul class="sectlevel2">
<li><a href="#_enteros">4.1. Enteros</a></li>
<li><a href="#_punto_flotante">4.2. Punto Flotante</a>
<ul class="sectlevel3">
<li><a href="#_comparación_de_punto_flotante">4.2.1. Comparación de Punto Flotante</a></li>
</ul>
</li>
<li><a href="#_formateo_de_punto_flotante">4.3. Formateo de Punto Flotante</a></li>
</ul>
</li>
<li><a href="#_secuencias_listas_y_rangos">5. Secuencias, Listas y Rangos</a>
<ul class="sectlevel2">
<li><a href="#_sequence">5.1. Sequence</a>
<ul class="sectlevel3">
<li><a href="#_each">5.1.1. each</a></li>
<li><a href="#_map">5.1.2. map</a></li>
<li><a href="#_where">5.1.3. where</a></li>
<li><a href="#_reduce">5.1.4. reduce</a></li>
<li><a href="#_take">5.1.5. take</a></li>
<li><a href="#_skip">5.1.6. skip</a></li>
<li><a href="#_contains">5.1.7. contains</a></li>
<li><a href="#_count">5.1.8. count</a></li>
<li><a href="#_join">5.1.9. join</a></li>
<li><a href="#_all">5.1.10. all</a></li>
<li><a href="#_any">5.1.11. any</a></li>
</ul>
</li>
<li><a href="#_list">5.2. List</a></li>
<li><a href="#_range">5.3. Range</a></li>
</ul>
</li>
<li><a href="#_funciones_y_fibras">6. Funciones y Fibras</a></li>
<li><a href="#_control_de_flujo_2">7. Control de Flujo</a></li>
<li><a href="#_mapas">8. Mapas</a></li>
<li><a href="#_clases">9. Clases</a></li>
<li><a href="#_terminal_de_comandos">10. Terminal de Comandos</a></li>
<li><a href="#_proyectos_de_ejemplo_en_wren">11. Proyectos de ejemplo en Wren</a>
<ul class="sectlevel2">
<li><a href="#_terminal">11.1. Terminal</a>
<ul class="sectlevel3">
<li><a href="#_cómo_ejecutarlos">11.1.1. ¿Cómo ejecutarlos?</a></li>
<li><a href="#_adivina_el_número">11.1.2. Adivina el Número</a></li>
<li><a href="#_reino_de_dragones">11.1.3. Reino de Dragones</a></li>
<li><a href="#_diamantes">11.1.4. Diamantes</a></li>
<li><a href="#_carrera_de_caracoles">11.1.5. Carrera de Caracoles</a></li>
<li><a href="#_cañon">11.1.6. Cañon</a></li>
</ul>
</li>
<li><a href="#_gráficos">11.2. Gráficos</a>
<ul class="sectlevel3">
<li><a href="#_breakout">11.2.1. Breakout</a></li>
<li><a href="#_snake">11.2.2. Snake</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_soluciones_a_ejercicios">12. Soluciones a Ejercicios</a>
<ul class="sectlevel2">
<li><a href="#_capítulo_1">12.1. Capítulo 1</a>
<ul class="sectlevel3">
<li><a href="#chap1-ex1-sol">12.1.1. Solución: ¡Hola Wren!</a></li>
</ul>
</li>
<li><a href="#_capítulo_3">12.2. Capítulo 3</a>
<ul class="sectlevel3">
<li><a href="#chap3-ex1-sol">12.2.1. Solución: Donas</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_glosario">Glosario</a></li>
<li><a href="#_bibliografía">Bibliografía</a></li>
<li><a href="#_Índice">Índice</a></li>
<li><a href="#_colofón">Colofón</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
En este pequeño documento se detallarán lo básico del lenguaje de programación <a href="http://wren.io">Wren</a>.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prefacio">Prefacio</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_dedicatoria">Dedicatoria</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_pequeña_historia_de_wren">1. Pequeña Historia de <a href="https://github.com/wren-lang/wren"><em>Wren</a></em></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/wren-lang/wren"><em>Wren</a></em> es un lenguaje de programación <a href="https://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos">orientado a objetos</a> creado por <a href="http://journal.stuffwithstuff.com/">Bob Nystrom</a>, un ex desarrollador de videojuegos y creador de otros lenguajes de programación como <a href="https://github.com/munificent/vigil">Vigil</a>, <a href="http://finch.stuffwithstuff.com/">Finch</a> y <a href="http://magpie-lang.org/">Magpie</a>. Ha escrito dos libros: <a href="http://gameprogrammingpatterns.com/">Game Programming Patterns</a> y <a href="http://craftinginterpreters.com/">Crafting Interpreters</a>.</p>
</div>
<div class="paragraph">
<p>El primer <em>commit</em> de <em>Wren</em> fue escrito el <a href="https://github.com/wren-lang/wren/tree/2f6a6889f1b4a1ba86aeb169e7398704b1ee04c0">22 de Octubre del 2013</a> y su versión más reciente es la <em>0.3</em>. Actualmente <em>Bob Nystrom</em> pasó a ser colaborador y la evolución del lenguaje fue asignada a <a href="https://github.com/underscorediscovery">_discovery</a> (creador del <a href="https://luxeengine.com">game engine Luxe</a>).</p>
</div>
<div class="paragraph">
<p><em>Wren</em> fue creado como una alternativa a <em>Lua</em> y otros <a href="https://en.wikipedia.org/wiki/Scripting_language">lenguajes de scripting</a> para personas que estuvieran más familiarizadas con lenguajes orientados a objetos como <em>Java</em>, <em>C#</em>, o <em>C++</em>. Su principal foco es la simpleza.</p>
</div>
<div class="paragraph">
<p>La página oficial de Wren es <a href="http://wren.io">Wren.io</a>.</p>
</div>
<div class="paragraph">
<p>La principal característica de <em>Wren</em> es ser un <strong>lenguaje minimalista</strong>. Esto significa
que no todas las ideas y utilidades serán implementadas en la <em>API</em> oficial. Muchas
veces se tendrá la obligación de implementar funcionalidades adicionales que en otros
lenguajes están disponibles de fábrica. Normalmente la recomendación es tener
una serie de archivos con utilidades a mano y si algún día son implementadas en la <em>API</em>
oficial, poder reemplazarlos adecuadamente.</p>
</div>
<div class="sect2">
<h3 id="_qué_es_un_wren">1.1. ¿Qué es un <em>Wren</em>?</h3>
<div class="paragraph">
<p><em>Wren</em> es un <a href="https://es.wikipedia.org/wiki/Troglodytidae">tipo de ave pequeña</a> perteneciente a la familia de los troglodítidos (que habita en cavernas o cuevas). En Chile tenemos al <a href="https://www.avesdechile.cl/074.htm">Chercán o Chochin Criollo</a>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77261969-2240d580-6c71-11ea-93d0-4341e82c2f92.png" alt="Chochin Criollo - Fotografía por Juan Tassara B."></span></p>
</div>
<div class="literalblock">
<div class="content">
<pre>Fotografía por Juan Tassara B en https://www.avesdechile.cl.</pre>
</div>
</div>
<div class="paragraph">
<p>Esta familia de aves se caracteriza por sus canciones elaboradas y complejas. Es uno de los más queridos compositores de las aves. Sus canciones tienen una rica variedad de cromatura musical.</p>
</div>
<div class="paragraph">
<p>También son aves muy hogareñas que prefieren quedarse en un mismo territorio a emigrar. Cuando vuelan sorprenden con la gran altura que pueden alcanzar y su rapidez. ¡Nunca sabes en que dirección van a salir!.</p>
</div>
<div class="paragraph">
<p>En las tradiciones celtas, el <em>Wren</em> es un símbolo de vivacidad y actividad.</p>
</div>
</div>
<div class="sect2">
<h3 id="_por_qué_aprender_wren">1.2. ¿Por qué aprender <em>Wren</em>?</h3>
<div class="paragraph">
<p>Existen algunos lenguajes interpretados usados para ser incrustados dentro de aplicaciones. <a href="https://www.lua.org/"><em>Lua</em></a> es uno de los más populares. Actualmente también son populares <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript"><em>JavaScript</em></a> o <a href="https://www.python.org/"><em>Python</em></a>.</p>
</div>
<div class="paragraph">
<p><em>Lua</em> es genial, simple y rápido. Pero muchas veces su naturaleza es un poco incómoda para personas más acostumbaradas a lenguajes como <a href="https://isocpp.org/"><em>C++</em></a> o <a href="https://openjdk.java.net/"><em>Java</em></a>. La sintaxis es diferente y la semántica del modelo de objetos es algo inusual.</p>
</div>
<div class="paragraph">
<p><em>Wren</em> es una alternativa a <em>Lua</em> pensada para personas mas familiarizadas con lenguajes orientados a objetos.</p>
</div>
<div class="paragraph">
<p>Acá podemos comparar la implementación de una clase llamada <em>Cuenta</em> entre
<em>Lua</em> y <em>Wren</em>.</p>
</div>
<div class="listingblock">
<div class="title">Lua</div>
<div class="content">
<pre class="highlight"><code class="language-lua" data-lang="lua">-- cuenta.lua

Cuenta = {}
Cuenta.__index = Cuenta

function Cuenta.crear(balance)
  local cuenta = {}             -- nuevo objeto
  setmetatable(cuenta,Cuenta)   -- hacer el objeto cuenta tenga las propiedades de Cuenta
  cuenta.balance = balance      -- inicializar el objeto
  return cuenta
end

function Cuenta:retirar(monto)
  self.balance = self.balance - monto
end

-- crear y usar una Cuenta
cuenta = Cuenta.crear(1000)
cuenta:retirar(100)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Wren</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// cuenta.wren

class Cuenta {
  construct crear(balance) { _balance = balance }
  retirar(monto) { _balance = _balance - monto }
}

// crear y usar una Cuenta
var cuenta = Cuenta.crear(1000)
cuenta.retirar(100)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los lenguajes orientados a objetos y clases tradicionalmente tienen una reputación
de ser complejos. Esto es principalmente por que los lenguajes que implementan este paradigma
son complejos: <em>C++</em>, <em>Java</em>, <a href="https://docs.microsoft.com/en-us/dotnet/csharp/"><em>C#</em></a>, <a href="https://www.ruby-lang.org/en/"><em>Ruby</em></a> y <em>Python</em>.</p>
</div>
<div class="paragraph">
<p>Uno de los objetivos de <em>Wren</em> es demostrar que son dichos lenguajes los complejos, no la orientación a objetos y clases en sí. <a href="https://es.wikipedia.org/wiki/Smalltalk"><em>Smalltalk</em></a> fue uno de los precursores y la inspiración para muchos de aquellos lenguajes. Es tan simple que toda su sintaxis puede ser escrita en una <em>tarjeta kardex</em>. <em>Wren</em> desea ser igual de minimalista, pero al mismo contar con el poder expresivo de las clases y orientación a objetos.</p>
</div>
<div class="paragraph">
<p>Finalmente para responder la pregunta de <em>"¿Por qué aprender Wren?"</em>. Principalmente por que aprender un nuevo lenguaje de programación siempre entregará experiencia que puede ser extrapolada a otros ámbitos y contextos. Tal vez sea más simple de aprender un concepto en <em>Wren</em> que en <em>Python</em> o <em>Lua</em>. Quizás un lenguaje de nicho como <em>Wren</em> no tenga muchas ofertas laborales que lo soliciten, pero todo lo aprendido siempre será nutritivo para el desarrollo profesional.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cómo_usar_wren">1.3. ¿Cómo usar <em>Wren</em>?</h3>
<div class="paragraph">
<p><em>Wren</em> es un lenguaje interpretado, lo que significa que no requiere de compilación. Basta simplemente tener un intérprete para ejecutar los algoritmos. Hay varias alternativas.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/wren-lang/wren">Compilar tu propio intérprete de <em>Wren</em></a>. Esta es la opción para valientes.</p>
</li>
<li>
<p><a href="https://github.com/wren-lang/wren-cli/releases">Utiliza <em>Wren CLI</em></a> para ejecutar archivos <em>*.wren</em>.</p>
</li>
<li>
<p>Utiliza un engine de juegos como <a href="https://domeengine.com/"><em>Dome</em></a>, <a href="https://tic.computer"><em>TIC 80</em></a> o <a href="https://luxeengine.com/alpha/"><em>Luxe</em></a> que traen <em>Wren</em> listo para llegar y utilizar.</p>
</li>
<li>
<p>Utiliza <a href="https://wren.io/try/"><em>Wren Try</em></a> para probar el lenguaje en tu navegador.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Una vez que tengas tu intérprete instalado puedes ejecutar por ejemplo`./wren main.wren` para ver el resultado de tu script.</p>
</div>
</div>
<div class="sect2">
<h3 id="_wren_cli">1.4. <a href="https://github.com/wren-lang/wren-cli">Wren CLI</a></h3>
<div class="paragraph">
<p>La terminal de <em>Wren</em> llamada <em>Wren CLI</em> (<a href="https://es.wikipedia.org/wiki/Interfaz_de_l%C3%ADnea_de_comandos">Interfaz de línea de comandos</a>) permite dos modos de operación. El primero es el modo <a href="https://es.wikipedia.org/wiki/REPL"><em>REPL</em></a> (Bucle Lectura-Evaluación-Impresión) el cual nos permite evaluar las instrucciones una a una. El segundo modo es el intérprete que permite ejecutar scripts <em>Wren</em>.</p>
</div>
<div class="paragraph">
<p>Si ejecutamos simplemente el comando <code>./wren</code> entraremos al modo <em>REPL</em>. Donde se nos mostrará un simpático pajarito y la versión de <em>Wren</em> instalada.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77837383-22444800-713f-11ea-8db4-3f404faabc10.png" alt="Wren CLI"></span></p>
</div>
<div class="sect3">
<h4 id="_operaciones_matemáticas">1.4.1. Operaciones Matemáticas</h4>
<div class="paragraph">
<p>Podremos ejecutar operaciones matemáticas como <code>5 * 5</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77837948-7ce0a280-7145-11ea-8b43-3f91f7491b35.png" alt="5 * 5"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_system_print">1.4.2. System.print()</h4>
<div class="paragraph">
<p>O También mostrar un mensaje utilizando <code>System.print()</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77837982-d517a480-7145-11ea-86f4-7a24e5ecc628.png" alt="System.print()"></span></p>
</div>
<div class="paragraph">
<p>¿Por qué aparece la palabra <code>Plop!</code> dos veces?. Simplemente por que la primera vez es el resultado de la operación <code>System.print()</code> (mostrar un valor), mientras que la segunda vez está mostrando el valor retornado por <code>System.print()</code>, el cual es el mismo texto.</p>
</div>
</div>
<div class="sect3">
<h4 id="_errores">1.4.3. Errores</h4>
<div class="paragraph">
<p>Si cometemos algún error <em>Wren CLI</em> nos avisará con un bonito mensaje.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77838174-c4682e00-7147-11ea-9e82-ffd2dc4dd1f9.png" alt="Error"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_ejecución_de_archivos">1.4.4. Ejecución de archivos</h4>
<div class="paragraph">
<p>Cuando necesitamos algo mucho más avanzado podemos utilizar archivos que finalicen con la extensión <em>*.wren</em>. El nombre más común es <em>main.wren</em>, aunque puedes llamarlo con cualquier nombre. Para ejecutar un archivo específico simplemente se debe utilizar <code>./wren &lt;archivo.wren&gt;</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creamos un nuevo archivo llamado <code>main.wren</code>.</p>
</li>
<li>
<p>Escribimos nuestro código (En este caso <code>System.print("Plop!")</code>) y guardamos.</p>
</li>
<li>
<p>Finalmente Ejecutamos <code>./wren main.wren</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Deberíamos ver un resultado similar a este:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77839010-7c4d0980-714f-11ea-90df-4330a821d207.png" alt="Plop!"></span></p>
</div>
<div class="paragraph">
<p>Notar como solamente aparece una vez "Plop!", ya que no estamos en modalidad <em>REPL</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_códigos_de_salida_exit_code">1.4.5. Códigos de salida (Exit code)</h4>
<div class="paragraph">
<p>Cada vez que un programa termina su ejecución devuelve un código numérico para indicar si terminó exitosamente o tuvo un algún tipo de error mientras se ejecutaba.</p>
</div>
<div class="paragraph">
<p>La convención tradicional es considerar el código cero (0) como éxito y cualquier otro número como error. No hay un estándar definido para la asignación de números de error. <em>Wren</em> se basa levemente en los códigos utilizados por el sistema operativo <a href="https://github.com/openbsd/src/blob/master/include/sysexits.h"><em>BSD</em></a>.</p>
</div>
<div class="paragraph">
<p>Actualmente no puedes elegir el código de error. <em>Wren</em> automáticamente asignará el código que mejor se ajuste a la situación. Por ejemplo si utilizar la instrucción para terminar la ejecución del programa <code>Fiber.abort("Mensaje de Error")</code> el código asignado sera de 70 (error interno del software).</p>
</div>
<div class="paragraph">
<p>La siguiente es una tabla con los códigos de BSD más algunos otros adicionales.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>0 - Fin del programa exitoso
1 - Error desconocido
2 - (grep) Uso incorrecto del comando | (bash) Error de entrada/salida
64 - Uso incorrecto del comando
65 - Error de formato de datos
66 - Sin acceso a la entrada
67 - Dirección desconocida
68 - Nombre de dominio (host name) desconocido
69 - Servicio no disponible
70 - Error interno del software
71 - Error de sistema
72 - Archivo crítico del sistema no encontrado
73 - Imposible de crear archivo de salida
74 - Error de entrada/salida
75 - Falla temporal
76 - Error remoto en protocolo
77 - Permiso denegado
78 - Error de configuración
126 - Comando encontrado, pero no es ejecutable
127 - Comando no encontrado
128 - Código de salida no válido
128   Error fatal terminado por kill -9
140 - Comando terminado por Ctrl-C
141 - Comando terminado por Ctrl-D
255 - Código de salida fuera de rango</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esta es la lista de los errores <a href="https://raw.githubusercontent.com/wren-lang/wren/58611240e75522df1a17ba29d8fd2109b4d2f657/test/test.h">usados en <em>Wren</em></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">// Exit codes used by the wren binaries, following the BSD standard
//
// The interpreter was used with an incorrect number of arguments
#define WREN_EX_USAGE 64

// Compilation error
#define WREN_EX_DATAERR 65

// Runtime error
#define WREN_EX_SOFTWARE 70

// Cannot open input file
#define WREN_EX_NOINPUT 66

// I/O Error
#define WREN_EX_IOERR 74</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puedes verificar el código numérico de salida utilizando el siguiente comando (bash)</p>
</div>
<div class="paragraph">
<p><code>./wren main.wren | echo "Exit code ${PIPESTATUS[0]}"</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/292738/77839414-d9968a00-7152-11ea-9bd3-b42ff06a4d1a.png" alt="Exit Code 0"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios">1.5. Ejercicios</h3>
<div class="sect3">
<h4 id="chap1-ex1">1.5.1. ¡Hola Wren!</h4>
<div class="paragraph">
<p>Es una <a href="https://es.wikipedia.org/wiki/Hola_mundo">tradición</a> que cuando se esté aprendiendo
un lenguaje de programación se escriba una variante
del mensaje "!Hola mundo¡". Este es un programa
muy simple que permite verificar que tu computadora
esta correctamente configurada para correr programas
en <em>Wren</em>.</p>
</div>
<div class="paragraph">
<p>Para este ejercicio simplemente se debe crear un nuevo
archivo llamado <code>hola.wren</code> con una única instrucción
que muestre el mensaje "¡Hola Wren!".</p>
</div>
<div class="paragraph">
<p>Luego ejecutar el programa utilizando el intérprete de <em>Wren</em>.</p>
</div>
<div class="paragraph">
<div class="title">Ejecución</div>
<p><code>$ ./wren hola.wren</code></p>
</div>
<div class="listingblock">
<div class="title">Salida</div>
<div class="content">
<pre class="highlight"><code>¡Hola Wren!</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Código</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: ¡Hola Wren!</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Solución</div>
<p><a href="#chap1-ex1-sol">Solución: ¡Hola Wren!</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nociones_básicas">2. Nociones Básicas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Todo lenguaje de programación define estructuras base que
determinan la forma de escribir el lenguaje. El siguiente
capítulo detalla las normas básicas con las que funciona
<em>Wren</em>.</p>
</div>
<div class="sect2">
<h3 id="_tipos_de_datos">2.1. Tipos de datos</h3>
<div class="paragraph">
<p>Todos los tipos de datos en <em>Wren</em> son objetos, instancias de una clase específica. Las operaciones son métodos disponibles en dichas clases.</p>
</div>
<div class="paragraph">
<div class="title">Wren</div>
<p>Estas son las clases disponibles dentro del lenguaje <em>Wren</em> "vainilla".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Bool</em></p>
</li>
<li>
<p><em>Class</em></p>
</li>
<li>
<p><em>Fiber</em></p>
</li>
<li>
<p><em>Fn</em></p>
</li>
<li>
<p><em>List</em></p>
</li>
<li>
<p><em>Map</em></p>
</li>
<li>
<p><em>Null</em></p>
</li>
<li>
<p><em>Num</em></p>
</li>
<li>
<p><em>Object</em></p>
</li>
<li>
<p><em>Range</em></p>
</li>
<li>
<p><em>Sequence</em></p>
</li>
<li>
<p><em>String</em></p>
</li>
<li>
<p><em>System</em></p>
</li>
<li>
<p><em>Meta</em></p>
</li>
<li>
<p><em>Random</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Importante</div>
<p>No se puede heredar desde estas clases debido al problema de <a href="https://es.wikipedia.org/wiki/Reentrancia_(inform%C3%A1tica)"><em>Reentrancia</em></a> (<em>Wren</em> no tiene esta capacidad). Para extender solo es posible usando la composición (Crear una nueva clase). Esto significa que al llamar a un método de una clase que herede de un tipo base, la máquina virtual no podrá diferenciar los métodos (Ya que son clases creadas con código de bajo nivel), lo que puede causar errores, por esta razón no está permitido heredar de las clases primitivas.</p>
</div>
<div class="paragraph">
<div class="title">Wren CLI</div>
<p>Estas clases son exclusivas de la <em>Wren CLI</em>. No estarán disponibles fuera del entorno de ejecución de este intérprete de <em>Wren</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Directory</em></p>
</li>
<li>
<p><em>File</em></p>
</li>
<li>
<p><em>Stat</em></p>
</li>
<li>
<p><em>Stdin</em></p>
</li>
<li>
<p><em>Stdout</em></p>
</li>
<li>
<p><em>Platform</em></p>
</li>
<li>
<p><em>Process</em></p>
</li>
<li>
<p><em>Scheduler</em></p>
</li>
<li>
<p><em>Timer</em></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_variables">2.2. Variables</h3>
<div class="paragraph">
<p>Una variable es un contenedor de un valor específico.
Este valor puede ser una cadena de caracteres, númerico, booleano u otro tipo de objeto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var mensaje = "Hola mundo Wren"
System.print(mensaje)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se puede modificar el valor posteriormente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var mensaje = "Hola mundo Wren"
System.print(mensaje)

mensaje = "El chercán es una bonita ave"
System.print(mensaje)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si usamos una variable sin haberla declarado antes
recibiremos un error similar a lo siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var mensaje = "Hola"
System.print(mensaj)
[repl line 1] Error at 'mensaj': Variable is used but not defined.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Debemos siempre procurar que todas nuestras variables estén declaradas
dentro del contexto y que no existan errores de escritura en sus nombres.</p>
</div>
</div>
<div class="sect2">
<h3 id="_identificadores">2.3. Identificadores</h3>
<div class="paragraph">
<p>Similar al <em>Lenguaje C</em>, para los indentificadores (nombres de variables, clases, metodos, funciones) se pueden utilizar los caracteres de la <a href="http://www.asciitable.com/">lista <code>ascii</code></a> y comenzar con un caracter alfabético o guión bajo. Los identificadores en <em>Wren</em> diferencian entre mayúsculas y minúsculas. Solo se permiten letras (<code>A - Z</code>, <code>a - z</code>), números (<code>0 - 9</code>) y guión bajo (<code>_</code>). No se permiten espacios o comenzar con un número o guión alto (<code>-</code>).</p>
</div>
<div class="sect3">
<h4 id="_ejemplo_de_identificadores_válidos">2.3.1. Ejemplo de Identificadores válidos</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">hola
camelCase
PascalCase
_under_score
abc123
TODAS_MAYUSCULAS</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_de_identificadores_no_válidos">2.3.2. Ejemplo de Identificadores no válidos</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>13hola
mi-variable
$miVariable
mi variable
ñandú
👨miMetodo
Mi👩clase</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_unicode">2.3.3. Unicode</h4>
<div class="paragraph">
<p>No están permitidos caracteres <a href="https://es.wikipedia.org/wiki/UTF-8">UTF-8</a> como la <code>Ñ</code> o los emojis en los identificadores. Sin embargo las <code>Strings</code> las soportan en su contenido sin problemas. Hay lenguajes como <a href="https://swift.org/"><em>Swift</em></a> o <a href="https://www.emojicode.org/">Emoji Code</a> que si soportan identificadores con emojis, aunque la utilidad de esta práctica es debatible.</p>
</div>
<div class="listingblock">
<div class="title">EmojiCode</div>
<div class="content">
<pre class="highlight"><code>🏁 🍇
  😀 🔤Hello World!🔤❗️
🍉</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_identificadores_que_inician_con_guión_bajo">2.3.4. Identificadores que inician con guión bajo</h4>
<div class="paragraph">
<p>Un caso especial es para los identificadores con guión bajo como <code>_color</code> (un guión bajo al principio) y <code>__sabor</code> (dos guiones bajos al principio). Con un guión bajo indica que es una propiedad de instancia, mientras que con dos guiones bajos indican que es una propiedad de clase. Más detalles en la sección de Clases.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identificadores_de_clase">2.3.5. Identificadores de clase</h4>
<div class="paragraph">
<p>Para <em>Wren</em> es importante que las clases comiencen
su nombre con mayúsculas. Si bien es posible definir clases con letras minúsculas no es recomendable hacerlo debido a que pueden colisionar con variables dentro del contexto de clase o método.</p>
</div>
<div class="paragraph">
<p>Ejemplos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Asociamos la clase `Numero` como un substituto para llamar a la clase `Num`
var Numero = Num</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Dará error. No se puede heredar de las clases primitivas.
class Numero is Num {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Es posible nombrar con minúsculas, pero puede dar
// conflictos de contexto al momento de usarlo dentro
// de una clase. (Puede hacer colisión con nombres de variable)
class numero {}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_recomendaciones">2.3.6. Recomendaciones</h4>
<div class="ulist">
<ul>
<li>
<p>Los nombres de los identificadores deben ser descriptivos, sin ser muy largos. Ejemplo <em>"ruedasMotocicleta"</em> es mejor que solo "ruedas" y "numero_de_ruedas_en_una_moto".</p>
</li>
<li>
<p>La letra <em>"l"</em> mínuscula y la letra <em>"O"</em> mayúscula puede ser confundida con el número <em>"1"</em> y "0" respectivamente.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_saltos_de_línea">2.4. Saltos de línea</h3>
<div class="paragraph">
<p><em>Wren</em> utiliza los saltos de línea (<code>\n</code>), por lo que no es necesario utilizar el punto y coma (<code>;</code>) para separar instrucciones. Sin embargo omite los saltos de línea si la instrucción espera más información para ser válida.</p>
</div>
<div class="sect3">
<h4 id="_ejemplo_lista_de_elementos">2.4.1. Ejemplo: Lista de elementos</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var animales = [
  "perro",
  "gato",
  "condor",
  "huemul"
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_parámetros_de_un_método">2.4.2. Ejemplo: Parámetros de un método</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">MiClase.metodo(
  parametro1,
  parametro2,
  parametro3
)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_condicionales">2.4.3. Ejemplo: Condicionales</h4>
<div class="paragraph">
<p>Los saltos de línea son considerados en la declaración de bloques de código.
Por lo tanto es importante la posición de las llaves (<em>"{}"</em>) dentro de una instrucción.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Correcto
if (condiccion == true) { x = 0 }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Correcto
if (condiccion == true)   {
  x = 0
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Correcto
if (condicion == true) x = 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la llave no está presente en la misma línea, gatillará un error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Error
if (condiction == true)
{
  x = 0
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_generar_un_número_al_azar_del_0_al_9">2.4.4. Ejemplo: Generar un número al azar del 0 al 9</h4>
<div class="paragraph">
<p>Al considerar los saltos de línea significativos,
provoca un comportamiento inusual al momento de llamar métodos.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Los números pseudo aleatorios son generados utilizando la clase `Random`. Para generar un número del 0 al 9 se necesita utilizar 10, ya que el número máximo utilizado no está incluido dentro de la secuencia. Es decir se incluye 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 (total 10 números) dentro de los posibles resultados.</pre>
</div>
</div>
<div class="paragraph">
<p>Instrucción en una sola línea.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">Random.new().int(10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto no es válido en <em>Wren</em> (Pero si es válido en la mayoría de los lenguajes de programación).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">Random
.new()
.int(10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para ser válido necesitamos poner un punto al final de la línea.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">Random.
new().
int(10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Este comportamiento inusual espera ser reparado en la versión <code>0.4</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_error">2.4.5. Ejemplo: <strong>Error</strong></h4>
<div class="paragraph">
<p>La siguiente línea arroja error debido a que no tiene un salto de línea o una operación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">Random.new().int(10) Random.new().int(10)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retorno_implícito">2.5. Retorno implícito</h3>
<div class="paragraph">
<p>Al tener instrucciones de una sola línea, <em>Wren</em> asume
la existencia de una instrucción de retorno (<em>"return"</em>).
Si no hay un valor, se asume que el valor de retorno
es <em>null</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Auto {
  // ruedas retornará siempre el valor "4"
  ruedas {4}

  // similar a ruedas, pero usando una instrucción "return" explícita
  puertas {
    return 2
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_palabras_reservadas">2.6. Palabras Reservadas</h3>
<div class="paragraph">
<p><em>Wren</em> es un lenguaje simple y pequeño. Sus palabras reservadas son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">break class construct else false for foreign if import
in is null return static super this true var while</code></pre>
</div>
</div>
<div class="paragraph">
<p>Una palabra reservada tiene un significado especial para <em>Wren</em>, por lo que no se recomienda usarlas para llamar a variables o clases. De esta forma se evita conflictos y confusiones.</p>
</div>
<div class="sect3">
<h4 id="_caracteres_significativos">2.6.1. Caracteres significativos</h4>
<div class="ulist">
<ul>
<li>
<p>Caracteres comunes (<code>+ - * / % &lt; &gt; = ! ( ) [ ] | . " { } , &amp; ^ ? : ~ _</code>)</p>
</li>
<li>
<p>Retorno de carro (<code>\n</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_funciones_fn">2.7. Funciones (<em>Fn</em>)</h3>
<div class="paragraph">
<p>Las funciones en <em>Wren</em> son instancias de la clase <em>Fn</em> y deben ser llamadas utilizando su método <em>call()</em>. Al ser un objeto más, pueden ser pasadas como parámetros a métodos u otras funciones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var mostrar = Fn.new {|parametro|
  System.print(parametro)
}

// muestra: hola
mostrar.call("hola")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fibras_fiber">2.8. Fibras (<em>Fiber</em>)</h3>
<div class="paragraph">
<p>Son similares a las funciones, con la diferencia en que se ejecutarán en un hilo (<em>thread</em>) distinto. Además del método <em>call()</em> tienen un método <em>try()</em> usado normalmente para "atajar" errores.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var mostrar = Fn.new {|parametro|
  System.print(parametro)
}

// Si existe un error se almacenará en la variable error
var error = Fiber.new { mostrar.call("hola") }.try()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clases_class">2.9. Clases (<em>class</em>)</h3>
<div class="paragraph">
<p>Las clases se declaran utilizando la palabra clave <em>class</em> antes del nombre.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class MiClase {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La herencia se define utilizando la palabra clave <em>is</em>.
Solo se heredan los métodos de instancia.
Propiedades de clase (__var) y de instancia (_var),
constructores y métodos de clase no son heredados (todos son privados).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Animal {
  // la propiedad _nombre solo puede ser accesible
  // a clases hijos si se definen como métodos accesadores
  nombre {_nombre}

  // creamos un mutador de la clase
  nombre = (value) {
    _nombre = value
  }

  imprimir() {
    System.print(nombre)
  }
}

class Perro is Animal {

  imprimir() {
    System.print("imprimir en hijo")
  }

  // constructores no son heredables
  construct nuevo(nom) {
    // llamamos al método mutador de la clase padre
    this.nombre = nom

    // Usamos `super` para llamar a un método de la clase padre
    // Muestra "Joe" usando el método accesador del padre
    super.imprimir()

    // Muestra null
    System.print(_nombre)
  }
}

var perrito = Perro.nuevo("Joe")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para definir un constructor se utiliza la palabra clave <code>construct</code>.
Para llamar a la instancia se usa <code>this</code> (opcional).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Auto {
  construct nuevo() {
    System.print(this)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para definir un método o propiedad de clase se utiliza la palabra clave <em>static</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Fruta {
  // accesador (getter)
  static cantidad {__cantidad}

  // mutador (setter)
  static cantidad = (value) {
    // doble guión bajo indica propiedad de clase
    __cantidad = value
  }

  // método de clase
  static comer() {
    cantidad = cantidad - 1
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para saber el padre de la clase se utiliza la propiedad <code>supertype</code>.
Esta propiedad debe ser llamada recursivamente para obtener el árbol de herencia.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La clase primitiva base de todas es <code>Object</code>.</p>
</li>
<li>
<p>No se puede heredar de los primitivos como <code>String</code>, <code>Num</code>, <code>Map</code>, entre otros.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Animal {}

class Perro is Animal {}

System.print(Perro.supertype) // Animal

if (Perro.supertype == Animal) {
  // Perro es animal
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si queremos saber el tipo de una <em>instancia</em> se puede usar <code>is</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var perrito = Perro.new()
if (perrito is Perro) {
  // perrito es Perro
}

if (Perro is Animal) {
  // Falso, ya que son clases distintas
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Las propiedades <code>type</code>, <code>supertype</code> y <code>name</code> vienen dentro de cada clase.</p>
</li>
<li>
<p><code>Object</code> es la única clase que no tiene <code>supertype</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">class Animal {}

class Perro is Animal {}

System.print(Perro.name)
System.print(Perro.type)

System.print(Perro.supertype.name)
System.print(Perro.supertype.type)
System.print(Perro.supertype.supertype)

System.print(Object.supertype)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_control_de_flujo">2.10. Control de Flujo</h3>
<div class="paragraph">
<p>Existen las estructuras de control de flujo tradicionales: <em>if</em>, <em>for</em>, <em>while</em> y <em>break</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">if (condicion) {
  // codigo
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">while (condicion) {
  // codigo
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">for (elemento in secuencia) {
  // codigo
  break
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_importar">2.11. Importar</h3>
<div class="paragraph">
<p>Para separar el código en diversos archivos esta la instrucción <code>import</code>.
El leer los archivos e importar su contenido dependerá del intérprete.</p>
</div>
<div class="paragraph">
<p>La instrucción <code>import</code> va de la mano con la palabra <code>for</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// El módulo se llama "random" e importamos la clase "Random" que está dentro de este módulo
import "random" for Random</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_object">2.12. <a href="https://wren.io/modules/core/object.html">Object</a></h3>
<div class="paragraph">
<p>Es la clase padre de todas las demás clases en <em>Wren</em>.</p>
</div>
<div class="paragraph">
<p>Algunos métodos destacables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>toString</code>: Convierte el objeto a un <em>String</em>.</p>
</li>
<li>
<p><code>type</code>: Retorna la clase a la cual el pertenece el objeto.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Convertimos los datos a un String serializable
3.toString
["1",2,"tres", true].toString

// similar a "1" == "2", pero sin posibilidad de sobre escribir el operador
Object.same("1", "2")

// verificamos que la instancia pertenezca a la clase
if ("1" is String) {
  System.print("hola")
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comentarios">2.13. Comentarios</h3>
<div class="paragraph">
<p>Cuando se comienza a escribir código más elaborado, existe mayor necesidad de pensar
como codificar las soluciones a los problemas. Una vez que se soluciona el problema,
se dedicará una gran cantidad de tiempo en revisar y perfeccionar el algoritmo.</p>
</div>
<div class="paragraph">
<p>Los comentarios te permiten escribir en lenguaje humano como Inglés o Español, dentro
de los programas.</p>
</div>
<div class="paragraph">
<p>Los comentarios en <em>Wren</em> utilizan la misma sintaxis que el <a href="https://es.wikipedia.org/wiki/C_(lenguaje_de_programaci%C3%B3n)"><code>Lenguaje de Programación C</code></a>.</p>
</div>
<div class="paragraph">
<p>Los símbolos son los siguientes: <code>/* */</code> (multi línea) y <code>//</code> (línea única).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Comentario de una sola línea

/*
Este comentario
tiene múltiples
líneas
*/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden anidar los comentarios. útil para comentar código que ya tenga comentarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/*
Este comentario
tiene múltiples
líneas.
  /* También puedes incluir comentarios,
  dentro de comentarios multi línea.
  */
*/</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_tip_comentarios_tijera">2.13.1. Tip: Comentarios Tijera</h4>
<div class="paragraph">
<p>Puedes combinar los comentarios de una sola línea con los de múltiples líneas para
comentar/descomentar rápidamente secciones de código. Se llaman comentarios tijera
por que pueden "cortar" un código para no ser ejecutado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// /*
  codigo()
// */</code></pre>
</div>
</div>
<div class="paragraph">
<p>Al eliminar el comentario de la primera línea, el código será comentado. De esta forma rápidamente
puedes activar o desactivar secciones de código.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/*
  codigo()
// */</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puede aún ser más simplificado de esta forma</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">//*
  codigo()
// */</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se elimina el primer <code>/</code> el código será comentado. Por lo que se ahorra un par de movimientos al realizar el comentario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/*
  codigo()
// */</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tip_comentarios_de_parámetros">2.13.2. Tip: Comentarios de parámetros</h4>
<div class="paragraph">
<p>En <em>Wren</em> no es posible llamar a los parámetros por su nombre. Por lo que si utilizas una función
con algunos parámetros, puede ser útil comentarlos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">circulo(/* x */ 10, /* y */ 20, /* radio */ 10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>O mejor aún utilizar variables con nombres significativos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var x = 10
var y = 20
var radio = 10
circulo(x, y, radio)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cómo_es_un_buen_comentario">2.13.3. ¿Cómo es un buen comentario?</h4>
<div class="ulist">
<ul>
<li>
<p>Es completo, corto y directo. La mayoría de los comentarios deberían ser escritos en párrafos.</p>
</li>
<li>
<p>Explica tu forma de pensar, para que cuando regreses a leer el código en el futuro puedas comprender cómo se ha resuelto el problema.</p>
</li>
<li>
<p>También explica pensando en otros, para que otras personas puedan trabajar en tu código y entender cómo lo haz estructurado.</p>
</li>
<li>
<p>Explica una sección difícil con mayor detalle.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cuándo_comentar">2.13.4. ¿Cuándo comentar?</h4>
<div class="ulist">
<ul>
<li>
<p>Cuando tienes que pensar cómo funciona el código antes de escribirlo.</p>
</li>
<li>
<p>Cuando probablemente olvides como estabas resolviendo un problema.</p>
</li>
<li>
<p>Cuando exista más de una forma de resolver un problema.</p>
</li>
<li>
<p>Cuando es poco probable que otros comprendan cómo haz resuelto un problema.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Escribir buenos comentarios es un indicador de un buen programador. Úsalos siempre. Verás comentarios a lo largo de los ejemplos en este documento.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_límites">2.14. Límites</h3>
<div class="ulist">
<ul>
<li>
<p>Máximo de 16 parámetros en una función o método.</p>
</li>
<li>
<p>Máximo de 255 propiedades en una clase (incluyendo la herencia).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_strings_cadena_de_caracteres">3. <a href="http://wren.io/modules/core/string.html">Strings: Cadena de caracteres</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Las cadenas de caracteres (<em>String</em>) son delimitadas por las comillas dobles (<code>"</code>). Pueden ser de una sola línea o multi línea. En el caso de ser multi línea, estas conservarán todos los caracteres de espacio y salto de línea contenidos en el <em>string</em>. El caracter de comilla simple (<code>'</code>) no es significativo para <em>Wren</em>.</p>
</div>
<div class="paragraph">
<p>Las strings pueden contener caracteres unicode en <a href="http://utf8everywhere.org/">UTF-8</a>, como también caracteres no válidos para <em>UTF-8</em>.</p>
</div>
<div class="paragraph">
<p>Además son inmutables. El string <strong>"porotos"</strong> no podrá ser modificado (cambiando sus caracteres) luego de su creación.</p>
</div>
<div class="paragraph">
<p>Un string puede contener los siguientes valores:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Una cadena de texto compuesto por una secuencia de puntos de código textuales (textual code point).</p>
</li>
<li>
<p>Una cadena iterable compuesta por una secuencia de puntos de código numérico (numeric code point).</p>
</li>
<li>
<p>Un arreglo simple de bytes indexeables.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_string_de_una_línea">3.1. String de una línea</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">"Solo es necesario comillas dobles"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_string_multi_línea">3.2. String multi línea</h3>
<div class="paragraph">
<p><em>Wren</em> permite string multi líneas utilizando el mismo caracter de comillas dobles (<code>"</code>) de las strings de una sola línea.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">"
 Todo esto es una string multi línea
 Wren esperará hasta que aparezca
 la siguiente comilla doble.
 Los strings multi línea en Wren guardan tanto espacios como saltos de línea en su interior.
 (no son omitidos).
"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contando_el_largo_del_string">3.3. Contando el largo del string</h3>
<div class="paragraph">
<p>Si utilizamos la propiedad <code>count</code> podremos obtener el largo de un string.</p>
</div>
<div class="paragraph">
<p>Por ejemplo <code>"hola".count</code> devolverá <code>4</code>. Hay que tener cuidado con los caracteres unicode (emojis), ya que el largo dependerá de lo que se esté contando. <em>Wren</em> cuenta los puntos de código (code point) unicode, por que todos los strings están bajo <em>UTF-8</em> (similar al comportamiento de <a href="https://www.ruby-lang.org/en/"><em>Ruby</em></a> y <a href="https://www.python.org/"><em>Python 3</em></a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">System.print("a".count) // Retorna 1.
System.print("a".bytes.count) // Retorna 1 (Parte de la tabla ASCII original).

System.print("ñ".count) // Retorna 1.
System.print("ñ".bytes.count) // Retorna 2.

System.print("👹".count) // Retorna 1.
System.print("👹".bytes.count) // Retorna 4.

System.print("👨‍👩‍👧‍👦".count) // Retorna 7 al contar la unidades de código de Unicode
System.print("👨‍👩‍👧‍👦".bytes.count) // Retorna 25 al contar los bytes UTF-8</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>System.print("👨‍👩‍👧‍👦".count)</code> retorna 7 por que se está contando las unidades de código de unicode, es decir, el emoji 👨‍👩‍👧‍👦 está formado por los siguientes caracteres : 👨 + caracter de unión de ancho cero + 👩 + caracter de unión de ancho cero + 👧 + caracter de unión de ancho cero + 👦.</p>
</div>
<div class="paragraph">
<p><code>System.print("👨‍👩‍👧‍👦".bytes.count)</code> retorna 25 por que está contando los bytes necesarios para almacenar estos caracteres. bytes es una secuencia de caracteres en C, lo que permite utilizar los Strings para almacenar información en binario.</p>
</div>
<div class="paragraph">
<p>Hay dos formas de contar adicionales que <em>Wren</em> no soporta. La primera es contar por unidades de código <em>UTF-16</em> y la otra es considerar los emojis compuestos como una unidad.</p>
</div>
<div class="paragraph">
<p>El string "👨‍👩‍👧‍👦" debería ser de largo 11 para la codificación <em>UTF-16</em>. Mientras que debería ser de largo 1 si lo consideramos como un caracter singular (lo que percibe el usuario). Según los amigos de <a href="http://utf8everywhere.org/">UTF-8 Everywhere</a> contar de estas formas es poco productivo, ya que lo que importa es realmente los code units (unidades de código) <em>UTF-8</em> que se tiene al escribir un string. Por lo que <em>Wren</em> tiene un comportamiento adecuado. De todas formas ese tipo de conversiones y conteo podría programarse con códigos externos a <em>Wren</em>. Más detalles en el <a href="https://www.unicode.org/glossary/">Glosario Unicode</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unión_e_interpolación_de_strings">3.4. Unión e interpolación de strings</h3>
<div class="paragraph">
<p>Si deseamos unir varios strings o incluir datos dentro de ellos podemos utilizar las siguientes operaciones: <code>+</code> y <code>%()</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"Hola" + "Wren"</code>: Crea un nuevo string con la unión de <code>Hola</code> y <code>Wren</code>. Entregará <code>HolaWren</code>. Es necesario que ambos objetos sean strings. Por ejemplo si se utiliza <code>"Hola" + 1</code> entregará un error similar a <code>Runtime error: Right operand must be a string.</code>. Para poder unirlos tendremos que utiliza el método getter <code>toString</code> del número. <code>"Hola" + 1.toString</code>, retornando <code>Hola1</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El método <code>toString</code> es parte de la clase <a href="http://wren.io/modules/core/object.html"><code>Object</code></a> la cual es la padre de todos los tipos de datos en <em>Wren</em>. Tanto números, booleanos, strings y listas son objetos que heredan de esta clase.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"Hola %(mundo)"</code>: Crea un string con la frase <code>Hola</code> y el contenido de la variable <code>mundo</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La operación <code>%()</code> permite incluir cualquier instrucción <em>Wren</em> válida, la cual finalmente ejecutará el método <code>toString</code> para ser incluido en la cadena de caracteres. Esto incluso permite tener interpolaciones anidadas, pero eso se vuelve poco legible rápidamente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: La respuesta es 42.
System.print("La respuesta es %(20 * 2 + 2).")

// muestra: wow 149
System.print("wow %((1..3).map {|n| n * n}.join())")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiplicación_de_strings">3.5. Multiplicación de strings</h3>
<div class="paragraph">
<p>También se pueden multiplicar para repetir la cadena de caracteres una cantidad de veces determinada.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra hola hola hola
System.print("hola " * 3)</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Si bien se pueden sumar (_+_) y multiplicar (_*_), no existe operaciones para resta (_-_) y division (_/_) dentro de una cadena de caracteres.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_limitar_el_máximo_de_caracteres">3.6. Limitar el máximo de caracteres</h3>
<div class="paragraph">
<p>El <em>String</em> al ser una <em>Secuencia</em> puede utilizar
sus métodos como <em>take()</em> que permite obtener los
elementos dentro de una secuencia. El método <em>join()</em>
es necesario para convertir nuevamente la secuencia
en un <em>String</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: hola
System.print("hola wren".take(4).join())</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_caracteres_no_imprimibles">3.7. Caracteres no imprimibles</h3>
<div class="paragraph">
<p>Los caracteres no imprimibles o <em>Whitespace</em> son aquellos
caracteres que el computador puede ver, pero son invisibles
para una persona. Los caracteres no imprimibles más comunes son el espacio (<em>" "</em>), la tabulación (<em>"\t"</em>) y el salto de línea (<em>"\n"</em>). La combinación de dos caracteres <em>"\t"</em> crea un nuevo espacio tabulado, mientras que la combinación de dos caracteres <em>"\n"</em> crea una nueva línea dentro del <em>String</em>. ¡Puedes usarlos cuantás veces y dónde desees!.</p>
</div>
<div class="paragraph">
<p>Prueba el siguiente código:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">System.print("Hola a todos")
System.print("\tHola a todos")
System.print("Hola\na todos")
System.print("\n\n\nHola\ta\ttodos")</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_eliminando_caracteres_no_imprimibles">3.7.1. Eliminando caracteres no imprimibles</h4>
<div class="paragraph">
<p>Muchas veces al solicitar datos a un usuario, este puede incluir espacios adicionales al principio o final. Usualmente es buena idea eliminar estos caracteres no imprimibles antes de comenzar a procesar el dato.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var nombre = " arturo "

// Elimina solamente espacio final
System.print(nombre.trimEnd())

// Elimina solamente espacio inicial
System.print(nombre.trimStart())

// Elimina espacio inicial y final
System.print(nombre.trim())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se necesita ver con mayor claridad lo que sucede
se puede usar el siguiente código:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var nombre = " arturo "

// Elimina solamente espacio final
System.print("-" + nombre.trimEnd() + "-")

// Elimina solamente espacio inicial
System.print("-" + nombre.trimStart() + "-")

// Elimina espacio inicial y final
System.print("-" + nombre.trim() + "-")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_caracteres_de_escape">3.8. Caracteres de escape</h3>
<div class="paragraph">
<p>Muchas veces se necesitan escribir caracteres especiales en un string. Por ejemplo si quisieramos escribir <code>"Hola Wren"</code> incluyendo las comillas, tendríamos que escribirlo de esta forma <code>"\"Hola Wren\""</code>. Esto incluirá los caracteres de comillas dobles en la frase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">"\0" // byte NUL (Nulo) : 0.
"\"" // Comillas dobles.
"\\" // Barra invertida.
"\%" // Signo porcentaje.
"\a" // Sonido de alarma.
"\b" // Retroceso.
"\f" // Alimentación de formularios.
"\n" // Salto de línea.
"\r" // Retorno de carro.
"\t" // Tabulación.
"\v" // Tabulación vertical.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para indicar caracteres especiales podemos utilizar <code>\u</code> (unicode para letras disponibles en los idiomas humanos), <code>\U</code> (unicode para letras especiales como emoji) y <code>\x</code> (bytes sin codificar).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>System.print("\u0041\u0b83\u00DE")</code> = AஃÞ</p>
</li>
<li>
<p><code>System.print("\U0001F64A\U0001F680")</code> = 🙊🚀</p>
</li>
<li>
<p><code>System.print("\x48\x69\x2e")</code> = Hi.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rangos_de_caracteres">3.9. Rangos de caracteres</h3>
<div class="paragraph">
<p>Un <em>String</em> es una <em>Secuencia</em> de caracteres. Por lo que es posible obtener caracteres en posiciones específicas
utilizando rangos (<em>Range</em>). El índice comieza contando
desde cero para contar desde el principio de la cadena y puede tener valores negativos para contar
desde el final de la cadena.</p>
</div>
<div class="sect3">
<h4 id="_caracter_en_posición_específica">3.9.1. Caracter en posición específica</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: h
System.print("hola wren"[0])

// muestra: n
System.print("hola wren"[-1])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rango_de_caracteres_dentro_de_una_cadena">3.9.2. Rango de caracteres dentro de una cadena</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: la
System.print("hola wren"[2..3])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_invertir_una_cadena_de_caracteres">3.9.3. Invertir una cadena de caracteres</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: nerw aloh
System.print("hola wren"[-1..0])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_2">3.10. Ejercicios</h3>
<div class="sect3">
<h4 id="chap3-ex1">3.10.1. Donas</h4>
<div class="paragraph">
<p>Dada una cantidad de un número de donas,
retornar un string con el contenido
<em>"Número de donas: &lt;cantidad&gt;"</em>. Si
la cantidad es mayor o igual a 10, usar
la palabras <em>'muchas'</em> en vez del número de cantidad.</p>
</div>
<div class="paragraph">
<p>Ejercicio basado en <a href="#googlepython">[googlepython]</a>.</p>
</div>
<div class="paragraph">
<div class="title">Ejecución</div>
<p><code>$ ./wren donas.wren</code></p>
</div>
<div class="ulist">
<div class="title">Ejemplo</div>
<ul>
<li>
<p><code>donas.call(5)</code> retorna <em>"Número de donas: 5"</em></p>
</li>
<li>
<p><code>donas.call(23)</code> retorna <em>"Número de donas: muchas"</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Código</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var donas = Fn.new {|cantidad|
  // Tu código aquí
}


// Pruebas para evaluar que el ejercicio
// se ha completado exitosamente.
// no modificar.

var probar = Fn.new {|tengo, quiero|
  var prefijo = " X "
  if (tengo == quiero) {
    prefijo = " OK "
  }
  System.print("%(prefijo) tengo: %(tengo) quiero: %(quiero)")
}

System.print("Probando donas")
probar.call(donas.call(4), "Número de donas: 4")
probar.call(donas.call(9), "Número de donas: 9")
probar.call(donas.call(10), "Número de donas: muchas")
probar.call(donas.call(99), "Número de donas: muchas")
System.print()</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Solución</div>
<p><a href="#chap3-ex1-sol">Solución: Donas</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_num_números">4. <a href="https://wren.io/modules/core/num.html">Num: Números</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Los datos numéricos son bastante conocidos, sin embargo hay algunas cosas que se deben tener en cuenta. Como la mayoría de los lenguajes interpretados, <em>Wren</em> tiene un único tipo numérico: punto flotante de doble precisión. Los números en <em>Wren</em> son similares a otros lenguajes y son instancias de la clase <em>Num</em>.</p>
</div>
<div class="paragraph">
<p>Los siguientes son algunos ejemplos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Enteros
0
1234
-5678

// Decimales
3.14159
1.0
-12.34

// Notación científica
0.0314159e02
314.159e-02</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_enteros">4.1. Enteros</h3>
<div class="paragraph">
<p>Se pueden realizar todas las operaciones tradicionales con números enteros. Suma (<em>+</em>), resta (<em>-</em>), multiplicación (<em>*</em>), división (<em>/</em>) y módulo (<em>%</em>). Para utilizar exponentes se debe usar el método <em>pow()</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">System.print(3+2)

System.print(3-2)

System.print(3*2)

System.print(3/2)

System.print(3%2)

System.print(3.pow(2))</code></pre>
</div>
</div>
<div class="paragraph">
<p>También se puede utilizar paréntesis para alterar el orden de las operaciones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var ordenNormal = 2+3*4

System.print(ordenNormal)

var ordenMio = (2+3)*4

System.print(ordenMio)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_punto_flotante">4.2. <a href="https://github.com/Pybonacci/puntoflotante.org">Punto Flotante</a></h3>
<div class="paragraph">
<p>Los números de punto flotante se refieren a cualquier número con una parte decimal. La mayoría del tiempo se comportan de una forma matemática tradicional. Pero en muchas ocaciones se obtienen resultados con una parte decimal más larga de lo esperado. Esto ocurre por como las computadoras representan los números internamente; no tiene que ver con <em>Wren</em> mismo. Básicamente, los humanos están acostumbrados a trabajar con números <em>base 10</em>, donde <em>0.1</em> + <em>0.2</em> = <em>0.3</em>. Pero las computadoras trabajan en <em>base 2</em> y expresan los resultados como una potencia de dos. No existe una representación exacta para <em>0.3</em> en una potencia de dos y por esa razón el resultado presenta tantos decimales.</p>
</div>
<div class="paragraph">
<p>Como la memoria de las computadoras es limitada, no pueden almacenar números
con precisión infinita, en algún momento se debe limitar. Pero ¿Cuánta precisión se necesita?
¿Y <em>dónde</em> se necesita?, ¿Cuántos dígitos enteros y cuántos fraccionarios?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para un ingeniero construyendo una autopista, no importa si tiene 10 metros o 10.0001 metros de ancho ─ posiblemente ni siquiera sus mediciones eran así de precisas.</p>
</li>
<li>
<p>Para alguien diseñando un microchip, 0.0001 metros (la décima parte de un milímetro) es una diferencia <em>enorme</em> ─ pero nunca tendrá que manejar distancias mayores de 0.1 metros.</p>
</li>
<li>
<p>Un físico necesita usar la <a href="http://es.wikipedia.org/wiki/Velocidad_de_la_luz">velocidad de la luz</a> (más o menos 300000000) y la <a href="http://es.wikipedia.org/wiki/Constante_de_gravitaci%C3%B3n_universal">constante de gravitación universal</a> (más o menos 0.0000000000667) juntas en el mismo cálculo.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para satisfacer al ingeniero y al diseñador de circuitos integrados, el formato
tiene que ser preciso para números de órdenes de magnitud muy diferentes. Sin
embargo, solo se necesita precisión <em>relativa</em>. Para satisfacer al físico, debe
ser posible hacer cálculos que involucren números de órdenes muy dispares.</p>
</div>
<div class="paragraph">
<p>Básicamente, tener un número fijo de dígitos enteros y fraccionarios no es útil ─ y la solución es un formato con un <em>punto flotante</em>.</p>
</div>
<div class="sect3">
<h4 id="_comparación_de_punto_flotante">4.2.1. Comparación de Punto Flotante</h4>
<div class="paragraph">
<p>Si realizamos una pequeña comparación de números con punto flotante, nos encontraremos con que algunas comparaciones simples no pueden ser realizadas correctamente de la forma tradicional.</p>
</div>
<div class="paragraph">
<p>Debido a los errores de redondeo, la mayoría de los números de punto flotante terminan siendo ligeramente imprecisos. Mientras esta imprecisión se mantenga pequeña, normalmente se puede ignorar. Sin embargo, esto significa también que números que se espera que sean iguales (por ejemplo al calcular el mismo resultado utilizando distintos métodos correctos) a veces difieren levemente, y una simple prueba de igualdad falla:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var a = 0.15 + 0.15
var b = 0.1 + 0.2

// puede ser falso
if (a == b) {}

// también puede ser falso
if (a &gt;= b) {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Como los números de punto flotante tienen una cantidad de dígitos limitados, no pueden representar todos los <a href="http://es.wikipedia.org/wiki/N%C3%BAmero_real">números reales</a> de forma precisa: cuando hay más dígitos de los que permite el formato, los que sobran se omiten.</p>
</div>
<div class="paragraph">
<p>La solución es comprobar no si los números son exactamente iguales, sino si su <em>diferencia es muy pequeña</em>. El margen de error frente al que se compara esta diferencia normalmente se llama <em>epsilon</em>.</p>
</div>
<div class="paragraph">
<p>El valor de <em>epsilon</em> dependerá del contexto. Nunca usar un <em>epsilon</em> fijo. Un <em>epsilon</em> fijo elegido porque «parece pequeño» podría perfectamente ser demasiado grande cuando los números que se comparan son también muy pequeños. La comparación devolvería «verdadero» para números muy diferentes. Y cuando los números son muy grandes, el <em>epsilon</em> puede acabar siendo más pequeño que el mínimo error de redondeo, por lo que la comparación siempre devolvería «falso». Por tanto, es necesario ver si el error relativo es menor que <em>epsilon</em>.</p>
</div>
<div class="paragraph">
<p>El código a continuación pasa las pruebas para muchos casos especiales importantes, pero como puedes ver, utiliza cierta lógica no trivial. En particular, tiene que utilizar una definición totalmente distinta del margen de error cuando a o b son cero, porque la definición clásica del error relativo es inútil en esos casos.</p>
</div>
<div class="paragraph">
<p>Hay algunos casos en los que todavía produce resultados inesperados (concretamente, es mucho más estricto cuando un valor es casi cero que cuando es exactamente cero), y algunas de esas pruebas para las que fue desarrollado probablemente especifica un comportamiento que no es apropiado para algunas aplicaciones. Antes de usarlo, ¡asegúrate de que es adecuado para tu aplicación!.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var equivalentes = Fn.new { |a, b, epsilon|

  var absA = a.abs
  var absB = b.abs
  var diff = (a - b).abs

  // Atajo, maneja los infinitos
  if (a == b) {
      return true
  }

  // a o b o ambos son cero
  if (a * b == 0) {
      // El error relativo no es importante aquí.
      // Se tiene que utilizar una definición totalmente distinta
      // del margen de error cuando a o b son cero, porque la definición
      // clásica del error relativo es inútil en esos casos.
      return diff &lt; (epsilon * epsilon)
  }

  // Usar el error relativo
  return diff / (absA + absB) &lt; epsilon
}

// Prueba de la función
var a = 0.15 + 0.15
var b = 0.1 + 0.2

// Epsilon siempre debe ser entregado según el contexto de comparación
// no utilizar epsilon fijos.
var epsilon = 0.001

var eq = equivalentes.call(a, b, epsilon)

// Debería ser verdadero
System.print(eq)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formateo_de_punto_flotante">4.3. Formateo de Punto Flotante</h3>
<div class="paragraph">
<p>En muchas ocaciones se necesita limitar la cantidad
de decimales que un número muestra. <em>Wren</em> no cuenta
con instrucciones para formatear números como <em>C</em> u otros lenguajes (Ejemplo: <a href="http://www.cplusplus.com/reference/cstdio/printf/"><em>"%1.2f"</em></a>.)</p>
</div>
<div class="paragraph">
<p>Sin embargo existen algunas alternativas.</p>
</div>
<div class="paragraph">
<p>Tomemos por ejemplo la constante <em>PI</em> (<code>Num.pi</code>) =~ <em>3.141592</em>.</p>
</div>
<div class="paragraph">
<p>Si solamente quisieramos mostrar la parte entera (<em>3</em>) podemos utilizar el método <em>truncate</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Solamente muestra 3
System.print(Num.pi.truncate)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si desearamos mostrar <em>3.14</em> podemos usar la siguiente fórmula.</p>
</div>
<div class="paragraph">
<p><code>(numero * 1e&lt;posiciones decimales&gt;).truncate / 1e&lt;posiciones decimales&gt;</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var formateado = (Num.pi * 1e2).truncate / 1e2

// Muestra 3.14
System.print(formateado)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Podemos crear una función que generalice esta fórmula a cualquier cantidad de decimales.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var formatear = Fn.new {|numero, decimales| (numero * 10.pow(decimales)).truncate / 10.pow(decimales)}

// Muestra 3.14
System.print(formatear.call(Num.pi, 2))</code></pre>
</div>
</div>
<div class="paragraph">
<p>El problema de esta solución es que existe la posibilidad de perder precisión en los decimales, lo que puede causar problemas de cálculo. Para evitar este problema la solución recomendable es transformar el número a <em>String</em> y obtener los decimales por medio de manipulación de <em>strings</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Convertimos el número a String
var string = Num.pi.toString

// Queremos mostrar 3.14
var posiciones = 2

// Buscamos donde comienzan los decimales
var index = string.indexOf(".")

// Separamos el número entre entero y decimal
var entero = string[0...index]
var decimal = string[index + 1..-1]

// Obtenemos los decimales a mostrar
var decimales = decimal.take(posiciones).join()

// Reunimos la parte entera y decimal
var formateado = entero + "." + decimales

System.print(formateado)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_secuencias_listas_y_rangos">5. Secuencias, Listas y Rangos</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sequence">5.1. <a href="https://wren.io/modules/core/sequence.html">Sequence</a></h3>
<div class="paragraph">
<p>La secuencia es la clase padre de <em>List</em>, <em>String</em>, <em>Map</em>, <em>Range</em> y cualquier otra que implemente el <a href="https://wren.io/control-flow.html#the-iterator-protocol"><em>protocolo de iteración</em></a>. La característica principal de una secuencia es que esta podría ser virtualmente infinita (sin elementos que indiquen un fin).
Entre los métodos que podemos destacar de <em>Sequence</em> están:</p>
</div>
<div class="sect3">
<h4 id="_each">5.1.1. each</h4>
<div class="paragraph">
<p>Similar a un bucle <code>for</code>. Por cada elemento dentro de la secuencia llama a una función cuyo parámetro es el siguiente elemento en la secuencia.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]
numeros.each {|num|
  System.print(num)
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_map">5.1.2. map</h4>
<div class="paragraph">
<p>Llama a una función cuyo parámetro es el siguiente elemento en la secuencia. Retorna una nueva secuencia con el resultado de las operación en cada elemento.
El resultado de <code>map</code> es almacenado por referencia. Lo que significa que cambios posteriores en la secuencia original pueden afectar el valor del resultado de <code>map</code>.
Para pasarlo a una variable independiente, se debe ejecutar el método <code>toList</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]

// .toList es necesario para que System.print() muestre la lista apropiadamente.
// Esto es debido a que una secuencia puede no tener fin. Necesitamos pasarlo a una estructura de datos finita.
// También estamos utilizando el "retorno implícito".
numeros = numeros.map{|num| num + 1}.toList

// Muestra [2, 3, 4]
System.print(numeros)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_where">5.1.3. where</h4>
<div class="paragraph">
<p>Filtra una secuencia. Entregará una nueva lista la cual cumpla la condicional. Al igual que <code>map</code> se debe ejecutar el método <code>toList</code> para evitar que modificaciones en la secuencia original afecten la nueva secuencia.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3, 4]

var pares = numeros.where{|num| num % 2 == 0}.toList

// Muestra [2, 4]
System.print(pares)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reduce">5.1.4. reduce</h4>
<div class="paragraph">
<p>Llama a una función cuyo parámetro es el siguiente elemento en al secuencia. Retorna un único elemento, producto de las operaciones en cada elemento.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]

// Si no se pasa un acumulador, se considera el primer elemento como valor inicial
var resultado = numeros.reduce {|acumulador, num| acumulador + num}

// Muestra 6
System.print(resultado)

// Iniciamos el acumulador con valor -1
resultado = numeros.reduce(-1) {|acumulador, num| acumulador + num}

// Muestra 5
System.print(resultado)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_take">5.1.5. take</h4>
<div class="paragraph">
<p>Obtiene un número de elementos dentro de una secuencia.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3, 4]
var primeros = numeros.take(2).toList

// Muestra [1, 2]
System.print(primeros)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_skip">5.1.6. skip</h4>
<div class="paragraph">
<p>La operación inversa de <code>take</code>. Salta un número determinado de elementos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3, 4]
var ultimos = numeros.skip(2).toList

// Muestra [3, 4]
System.print(ultimos)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contains">5.1.7. contains</h4>
<div class="paragraph">
<p>Retorna verdadero si la secuencia contiene al elemento.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]

// Muestra "false" debido a que no contiene el número 4
System.print(numeros.contains(4))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_count">5.1.8. count</h4>
<div class="paragraph">
<p>Retorna el número de elementos de la secuencia. También es posible solamente contar elementos que cumplan una condición.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3, 4]

// 4
System.print(numeros.count)

// Contamos solamente los números múltiplos de 2
var pares = numeros.count {|num| num % 2 == 0}

// 2
System.print(pares)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_join">5.1.9. join</h4>
<div class="paragraph">
<p>Une a los elementos de una secuencia transformándolos en un <em>String</em>. Si no se pasa un parámetro se asume un caracter vació como unión.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]

// Muestra "123"
System.print(numeros.join())

// Muestra "1$2$3"
System.print(numeros.join("$"))

// Muestra "1 num 2 num 3"
System.print(numeros.join(" num "))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_all">5.1.10. all</h4>
<div class="paragraph">
<p>Itera sobre los elementos de una secuencia con una condicional. Devuelve verdadero si todos los elementos pasan la condición.
Si alguno de los elementos es falso, termina de iterar y devuelve falso.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]
var resultado = numeros.all {|num| num &gt; 2}

// Falso. No todos los números en la secuencia son mayores a 2
System.print(resultado)

resultado = numeros.all{|num| num &lt; 4}

// Verdadero. Todos los números en la secuencia son menores a 4
System.print(resultado)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_any">5.1.11. any</h4>
<div class="paragraph">
<p>Similar a <code>all</code>. Devuelve verdadero al primer elemento que pase la condición. Si ninguno de los elementos pasa la condición, devuelve falso.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]
var resultado = numeros.any {|num| num % 2 == 0}

// Verdadero. Existe un número múltiplo de 2.
System.print(resultado)

resultado = numeros.any {|num| num % 5 == 0}

// Falso. Ningún número es múltiplo de 5.
System.print(resultado)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_list">5.2. <a href="https://wren.io/modules/core/list.html">List</a></h3>
<div class="paragraph">
<p>Una lista es una colección de elementos que son almacenados en una variable. Los elementos pueden estar relacionados de cierta forma o no tener ningún tipo de relación.</p>
</div>
<div class="paragraph">
<p>El siguiente ejemplo muestra como iterar una lista:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var estudiantes = ["Pedro", "Javier", "Nicolás"]

for (estudiante in estudiantes) {
    System.print("¡Hola, " + estudiante + "!")
}

// La misma operación anterior, pero utilizando la función each
estudiantes.each{|estudiante|
  System.print("¡Hola, " + estudiante + "!")
}

// Añadimos un nuevo estudiante
estudiantes.add("Juan")

// Muestra ["Pedro", "Javier", "Nicolás", "Juan"]
System.print(estudiantes)

// Muestra "false" por que no existe el estudiante María
System.print(estudiantes.contains("María"))

// Muestra ["Pedro", "Javier"]
System.print(estudiantes.take(2).toList)

// Muestra "2"
System.print(estudiantes.indexOf("Javier"))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Generamos una lista de 4 elementos con valor 1
var elementos = [1] * 4

// Muestra [1, 1, 1, 1]
System.print(elementos)</code></pre>
</div>
</div>
<div class="paragraph">
<p>También podemos combinar listas fácilmente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var numeros = [1, 2, 3]
var letras = ["a", "b", "c"]
var elementos = numeros + letras

// Muestra [1, 2, 3, a, b, c]
System.print(elementos)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_range">5.3. <a href="https://wren.io/modules/core/range.html">Range</a></h3>
<div class="paragraph">
<p>Un rango es un objeto que representa una lista finita, incremental e iterable de números.
Es una operación disponible en cada instancia de un número.
Es dada por la operación <code>..</code> y la operación <code>&#8230;&#8203;</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>inicio..fin</code>: Incluye al número <code>fin</code>. Ejemplo: <code>1..3</code> retorna <code>[1, 2, 3]</code>.</p>
</li>
<li>
<p><code>inicio&#8230;&#8203;fin</code>: No incluye al número <code>fin</code>. Ejemplo <code>1&#8230;&#8203;3</code> retorna <code>[1, 2]</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Mostramos los números del 1 al 5
(1..5).each {|num|
  System.print("Número %(num)")
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Mostramos del 3 al 1
((1 + 2)..(3 - 2)).each {|num|
  System.print("Número %(num)")
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// Mostramos del 1 al 3 utilizando bucle for.
for (num in 1..3) {
  System.print("Número %(num)")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los rangos son muy útiles para obtener subconjuntos dentro de objetos iterables
como <em>Strings</em> y <em>Lists</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var nombre = "Juanito"

// Muestra "nito"
System.print(nombre[3..-1])

// Muestra "otinauJ"
System.print(nombre[-1..0])</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var letras = ["a", "b", "c", "d", "e"]
var subconjunto = letras[1..3]

// Muestra [b, c, d]
System.print(subconjunto)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_funciones_y_fibras">6. Funciones y Fibras</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_control_de_flujo_2">7. Control de Flujo</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_mapas">8. Mapas</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_clases">9. Clases</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_terminal_de_comandos">10. Terminal de Comandos</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_proyectos_de_ejemplo_en_wren">11. Proyectos de ejemplo en Wren</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Una colección de código fuente <em>Wren</em> con juegos y aplicaciones simples.
Se recomienda utilizar un editor de código como <a href="https://vscodium.com/">VS Codium</a>
para escribir los ejemplos.</p>
</div>
<div class="paragraph">
<p>Cada ejemplo puede ser categorizado en los siguientes niveles:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Niveles</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nivel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Novato</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliza operaciones simples como suma, resta, multiplicación, división, <em>System.print()</em> y estructuras de control.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intermedio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliza funciones, diccionarios y clases simples.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avanzado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliza clases, herencia y algoritmos avanzados.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_terminal">11.1. Terminal</h3>
<div class="paragraph">
<p>Aplicaciones que no necesitan interfaz gráfica para funcionar, solamente necesitando <em>Wren CLI</em> y la entrada/salida estándar.</p>
</div>
<div class="paragraph">
<p>Basados principalmente en los códigos diponibles en <a href="https://github.com/asweigart/PythonStdioGames">Python Stdio Games</a> y <a href="https://github.com/asweigart/inventwithpython3rded">Invent With Python</a>.</p>
</div>
<div class="sect3">
<h4 id="_cómo_ejecutarlos">11.1.1. ¿Cómo ejecutarlos?</h4>
<div class="paragraph">
<p>Primero se necesita el <a href="https://github.com/wren-lang/wren-cli/releases/latest">intérprete de Wren</a>.</p>
</div>
<div class="paragraph">
<p>Para mayor documentación sobre la consola y el lenguaje <em>Wren</em> se puede visitar <a href="http://wren.io/cli" class="bare">http://wren.io/cli</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_adivina_el_número">11.1.2. Adivina el Número</h4>
<div class="paragraph">
<p>Basado en <a href="http://inventwithpython.com/es/4.html">Adivina del Número</a>.</p>
</div>
<div class="paragraph">
<p>En el juego <em>"Adivina el Número"</em>. La computadora pensará un número aleatorio entre 1 y 20, y te pedirá que intentes adivinarlo. La computadora te dirá si cada intento es muy alto o muy bajo. Tú ganas si adivinas el número en seis intentos o menos.</p>
</div>
<div class="paragraph">
<p>Este es un buen juego para codificar ya que usa números aleatorios y bucles, y recibe entradas del usuario en un programa corto. Aprenderás cómo convertir valores a diferentes tipos de datos, y por qué es necesario hacer esto. Dado que este programa es un juego, nos referiremos al usuario como el jugador. Pero llamarlo “usuario” también sería correcto.</p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Novato</p>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_ejecución">Ejemplo de Ejecución</h5>
<div class="paragraph">
<p><code>$ ./wren adivina/adivina.wren</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">¡Hola! ¿Cómo te llamas?

Alberto

Bueno, Alberto, estoy pensando en un número entre 1 y 20.

Intenta adivinar 1/6.

10

Tu estimación es muy alta.

Intenta adivinar 2/6.

2

Tu estimación es muy baja.

Intenta adivinar 3/6.

4

¡Buen trabajo, Alberto! ¡Has adivinado mi número en 3 intentos!</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_código_fuente">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// nombre: adivina.wren
// autor: Camilo Castro &lt;camilo@ninjas.cl&gt;
// original: https://github.com/asweigart/inventwithpython3rded/blob/master/translations/es/src/adivinaElN%C3%BAmero.py
// ejecutar: wren adivina/adivina.wren

import "random" for Random
import "io" for Stdin

var random = Random.new()

var intentos = 0
var maxIntentos = 6

System.print("¡Hola!, ¿Cómo te llamas?")

var nombre = Stdin.readLine()
System.print("Bueno, %(nombre), estoy pensando en un número entre 1 y 20.")

// Un número aleatorio entre 1 y 20.
// se necesita usar 21 debido a que el generador
// no incluye el último número.
var numero = random.int(1, 21)
var estimacion = -1

while (intentos &lt; maxIntentos) {
    intentos = intentos + 1
    System.print("Intenta adivinar %(intentos)/%(maxIntentos)")
    
    estimacion = Num.fromString(Stdin.readLine())

    if (estimacion is Null) {
        System.print("Solo admito números")
    } else if (estimacion &lt; numero) {
        System.print("Tu estimación es muy baja")
    } else if (estimacion &gt; numero) {
        System.print("Tu estimación es muy alta")
    } else {
        break
    }
}

if (estimacion == numero) {
    System.print("¡Buen trabajo, %(nombre)! ¡Haz adivinado mi número en %(intentos) intentos!.")
}

if (estimacion != numero) {
    System.print("Pues no. El número que estaba pensando era %(numero)")
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reino_de_dragones">11.1.3. Reino de Dragones</h4>
<div class="paragraph">
<p>Basado en <a href="http://inventwithpython.com/es/6.html">Reino de Dragones</a>.</p>
</div>
<div class="paragraph">
<p>El juego se llama <em>"Reino de Dragones"</em>, y permite al jugador elegir entre dos cuevas, en una de las cuales encontrará un tesoro y en la otra su perdición.</p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Novato</p>
</div>
<div class="sect4">
<h5 id="_cómo_jugar_a_reino_de_dragones">¿Cómo Jugar a Reino de Dragones?</h5>
<div class="paragraph">
<p>En este juego, el jugador está en una tierra llena de dragones. Todos los dragones viven en cuevas junto a sus grandes montones de tesoros encontrados. Algunos dragones son amigables, y compartirán sus tesoros contigo. Otros son codiciosos y hambrientos, y se comerán a cualquiera que entre a su cueva. El jugador se encuentra frente a dos cuevas, una con un dragón amigable y la otra con un dragón hambriento. El jugador tiene que elegir entre las dos.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_ejecución_2">Ejemplo de Ejecución</h5>
<div class="paragraph">
<p><code>$ ./wren dragon/dragon.wren</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">Estás en una tierra llena de dragones. Frente a tí
hay dos cuevas. En una de ellas, el dragón es generoso y amigable y compartirá su tesoro contigo. El otro dragón
es codicioso y está hambriento, y te devorará inmediatamente.

¿A qué cueva quieres entrar? (1 ó 2)
1

Te aproximas a la cueva...
Es oscura y espeluznante...
¡Un gran dragon aparece súbitamente frente a tí! Abre sus fauces y...

¡Te engulle de un bocado!

¿Quieres jugar de nuevo? (sí or no)

no</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_código_fuente_2">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// nombre: dragon.wren
// autor: Camilo Castro &lt;camilo@ninjas.cl&gt;
// original: https://github.com/asweigart/inventwithpython3rded/blob/master/translations/es/src/drag%C3%B3n.py
// ejecutar: wren dragon/dragon.wren

import "random" for Random
import "timer" for Timer
import "io" for Stdin

var random = Random.new()

var mostrarIntroduccion = Fn.new {
  System.print("Estás en una tierra llena de dragones. Frente a tí")
  System.print("hay dos cuevas. En una de ellas, el dragón es generoso y")
  System.print("amigable y compartirá su tesoro contigo. El otro dragón")
  System.print("es codicioso y está hambriento, y te devorará inmediatamente.")
  System.print()
  }

  var elegirCueva = Fn.new {
  var cueva = null
  var primerDragon = "1"
  var segundoDragon = "2"

  while (cueva != primerDragon &amp;&amp; cueva != segundoDragon) {
    System.print("¿A qué cueva quieres entrar? (1 ó 2)")
    cueva = Stdin.readLine()
  }
  return cueva
}

var explorarCueva = Fn.new { |cueva|
    // existen 1000 millisegundos en un segundo
    // por lo que para obtener 2 segundos
    // debemos multiplicar 2 * 1000
    var dosSegundos = 2 * 1000

    System.print("Te aproximas a la cueva...")
    Timer.sleep(dosSegundos)
    
    System.print("Es oscura y espeluznante...")
    Timer.sleep(dosSegundos)
    
    System.print("¡Un gran dragon aparece súbitamente frente a tí! Abre sus fauces y...")
    System.print()
    Timer.sleep(dosSegundos)

    // Un número aleatorio entre 1 y 2.
    // se necesita usar 3 debido a que el generador
    // no incluye el último número
    var cuevaAmigable = random.int(1, 3).toString

    if (cueva == cuevaAmigable) {
      System.print("¡Te regala su tesoro!")
    } else {
      System.print("¡Te engulle de un bocado!")
    }

    System.print()
}

var jugarDeNuevo = "sí"
while (jugarDeNuevo == "sí" || jugarDeNuevo == "si" || jugarDeNuevo == "s") {
  mostrarIntroduccion.call()
  var cueva = elegirCueva.call()
  explorarCueva.call(cueva)

  System.print("¿Quieres jugar de nuevo? (sí o no)")
  jugarDeNuevo = Stdin.readLine()
}

System.print("¡Eso fue divertido, nos vemos luego!")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_diamantes">11.1.4. Diamantes</h4>
<div class="paragraph">
<p>Esta es una simple aplicación creativa que muestra
diamantes de distintos tamaños.
Basado en <a href="https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/diamonds.py">Diamonds</a>.</p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Novato</p>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_ejecución_3">Ejemplo de Ejecución</h5>
<div class="paragraph">
<p><code>./wren diamantes/diamantes.wren</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">/\
\/

/\
\/

 /\
/  \
\  /
 \/
...</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_código_fuente_3">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/*
Diamantes, por Al Sweigart &lt;al@inventwithpython.com&gt;
https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/diamonds.py
Dibuja diamantes de varios tamaños.
Adaptado a Wren por Camilo Castro &lt;camilo@ninjas.cl&gt;
https://github.com/NinjasCL/wren-libro/blob/main/juegos/diamantes/diamantes.wren
- Tags: tiny, beginner, artistic, pequeño, novato, artistico
- Version: 1.0.0
*/

var mostrarDiamanteLineal = Fn.new { |dimension|
  // Mostrar la parte superior del diamante
  for (i in 0...dimension) {
    // Espacio izquierdo
    System.write(" " * (dimension - i - 1))
    // Parte izquierda del diamante
    System.write("/")
    // Espacio interior del diamante
    System.write(" " * (i * 2))
    // Parte derecha del diamante
    System.print("\\")
  }

  // Mostrar la parte inferior del diamante
  for (i in 0...dimension) {
    // Espacio izquierdo
    System.write(" " * i)
    // Lado izquierdo
    System.write("\\")
    // Espacio interior
    System.write(" " * ((dimension - i - 1) * 2))
    // Lado derecho
    System.print("/")
  }
}

var mostrarDiamanteRelleno = Fn.new { |dimension|
  // Mostrar la cara superior del diamante
  for (i in 0...dimension) {
    // Espaciado izquierdo
    System.write(" " * (dimension - i - 1))
    // Lado izquierdo
    System.write("/" * (i + 1))
    // Lado derecho
    System.print("\\" * (i + 1))
  }

  // Mostrar la cara inferior del diamante
  for (i in 0...dimension) {
    // Espaciado izquierdo
    System.write(" " * i)
    // Lado izquierdo
    System.write("\\" * (dimension - i))
    // Lado derecho
    System.print("/" * (dimension - i))
  }
}

// Muestra 5 diamantes de tamaño 0 al 5:
for(dimension in 0..5) {
  mostrarDiamanteLineal.call(dimension)
  System.print()
  mostrarDiamanteRelleno.call(dimension)
  System.print()
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_carrera_de_caracoles">11.1.5. Carrera de Caracoles</h4>
<div class="paragraph">
<p>Una alucinante carrera entre 2 a 8 caracoles.
Basado en <a href="https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/snailrace.py">SnailRace</a>.</p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Intermedio</p>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_ejecución_4">Ejemplo de Ejecución</h5>
<div class="paragraph">
<p><code>$ ./wren caracoles/caracoles.wren</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>La gran carrera de caracoles

    @v &lt;-- caracol


¿Cuántos caracoles correrán? Min:2 Max:8
2
Ingresa el nombre del caracol #1:
Ana
Ingresa el nombre del caracol #2:
Berto

INICIO                                  META
|                                       |
                                     Ana
.....................................@v
                                       Berto
.......................................@v
¡Ha ganado Berto!</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_código_fuente_4">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/*
Snail Race, por Al Sweigart &lt;al@inventwithpython.com&gt;
https://github.com/asweigart/PythonStdioGames/blob/main/src/gamesbyexample/snailrace.py
Una carrera de caracoles, ¡alucinante!.
Adaptado a Wren por Camilo Castro &lt;camilo@ninjas.cl&gt;
https://github.com/NinjasCL/wren-libro/blob/main/juegos/caracoles/caracoles.wren
- Tags: short, beginner, artistic, corto, novato, artistico
- Version: 1.0.0
*/
import "random" for Random
import "timer" for Timer
import "io" for Stdin

var random = Random.new()

class Constantes {
  static minCaracoles { 2 }
  static maxCaracoles { 8 }
  static maxLargoNombre { 20 }
  static meta { 40 }
}


System.print("
La gran carrera de caracoles

    @v &lt;-- caracol

")

var cantidad = null

while (true) {
  System.print("¿Cuántos caracoles correrán? Min:%(Constantes.minCaracoles) Max:%(Constantes.maxCaracoles)")
  cantidad = Num.fromString(Stdin.readLine())
  if (cantidad &amp;&amp; cantidad &gt;= Constantes.minCaracoles &amp;&amp; cantidad &lt;= Constantes.maxCaracoles) {
    break
  }
  System.print("Ingresar un número entre %(Constantes.minCaracoles) y %(Constantes.maxCaracoles)")
}

var nombres = []

for (i in 1..cantidad) {
  var nombre = ""
  while (true) {
    
    System.print("Ingresa el nombre del caracol #%(i):")
    nombre = Stdin.readLine()

    // Reducimos el nombre a su largo máximo
    nombre = nombre.take(Constantes.maxLargoNombre).join()
    
    if (nombre.count == 0) {
      System.print("Por favor ingresa un nombre.")
    } else if (nombres.contains(nombre)) {
      System.print("Nombre ya existe")
    } else {
      break
    }
  }
  nombres.add(nombre)
}

System.print("\n" * 40)
System.print("INICIO" + " " * (Constantes.meta - "INICIO".count) + "META")
System.print("|" + " " * (Constantes.meta - "|".count) + "|")

var caracoles = {}

for (nombre in nombres) {
  System.print(nombre)
  System.print("@v")
  caracoles[nombre] = 0
}

// 1.5 segundos
Timer.sleep(15 * 100)

while (true) {

  for (i in 0..(random.int(1, cantidad + 1))) {
    var nombre = random.sample(nombres)
    caracoles[nombre] = caracoles[nombre] + 1

    if (caracoles[nombre] &gt;= Constantes.meta) {
      System.print("¡Ha ganado %(nombre)!")
      // Terminar el proceso del juego
      Fiber.yield()
    }
  }

  // 0.5 segundos
  Timer.sleep(500)

  System.print("\n" * 40)
  System.print("INICIO" + " " * (Constantes.meta - "INICIO".count) + "META")
  System.print("|" + " " * (Constantes.meta - "|".count) + "|")

  for (nombre in nombres) {
    var espacios = caracoles[nombre]
    System.print(" " * espacios + nombre)
    System.print("." * espacios + "@v")
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cañon">11.1.6. Cañon</h4>
<div class="paragraph">
<p>Este juego simula el disparo de un cañón hacia un objetivo.
Código levemente basado en <a href="#alfonseca">[alfonseca]</a>.</p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Intermedio</p>
</div>
<div class="sect4">
<h5 id="_cómo_jugar">¿Cómo Jugar?</h5>
<div class="paragraph">
<p>El jugador debe ingresar el ángulo para cada tiro del cañón.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_ejecución_5">Ejemplo de Ejecución</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Quedan 1 objetivos
El cañón puede disparar hasta 34595 metros
El objetivo está a 6788 metros
La fórmula de la distancia es: alcance * sin(2 * ángulo * π / 180)

Ingrese el ángulo para disparar
5
Distancia Alcanzada: 10690 Distancia Objetivo: 6788

El tiro se pasó en 3902 metros.
¡Prueba otra vez!, quedan 4 tiros

Ingrese el ángulo para disparar
3.1
Distancia Alcanzada: 6695 Distancia Objetivo: 6788

!!BooOOOM!!
¡Felicidades!, haz destruido al objetivo en 2 intentos.</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_código_fuente_5">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">/**
Juego que simula el disparo de un cañón hacia un objetivo.
El jugador debe ingresar el ángulo para cada tiro del cañón.
Código levemente basado en la obra "Cómo construir juegos de aventura"
de Manuel Afonseca. ISBN 84-7688-019-7
- Author: Camilo Castro &lt;camilo@ninjas.cl&gt;
- Version: 1.0.0
*/

import "random" for Random
import "io" for Stdin

var random = Random.new()

var alcance = 0

var objetivos = 3
var oportunidades = 5

// Ángulos deben estar en grados
// mínimo 0.5, máximo 89.5
var anguloElevacion = 0.5
var anguloMinimo = 0.5
var anguloMaximo = 89.5

// Sentinela para saber si el objetivo fue destruido
var destruido = false

// Para saber cuantos tiros fueron
// necesarios para destruir al objetivo
var tiros = 0

// Distancia mínima requerida para considerar
// al objetivo como destruido
// Si el proyectil llega a los 100 metros del objetivo
// se considera destruido
// (en metros).
var distanciaMinima = 100

// Distancia alcanzada por el tiro (en metros)
var distanciaAlcanzada = 0

// Distancia final
// distanciaAlcanzada - distanciaObjetivo
var distanciaFinal = 0

// Distancia al azar del objetivo
// Debe ser igual o menor al alcance del cañón
// entre 100 hasta el alcance del cañón.
var distanciaObjetivo = 0

var jugar = true
while (jugar) {

  System.print("Quedan %(objetivos) objetivos")

  // Valores iniciales por cada objetivo
  oportunidades = 5
  destruido = false
  anguloElevacion = 0
  distanciaFinal = 0
  tiros = 1
  
  // Un número aleatorio entre 10K y 50K
  // Usamos notación científica para simplificar el número
  alcance = random.int(10e3, 50e3 + 1)

  distanciaObjetivo = random.int(distanciaMinima, alcance + 1)

  System.print("El cañón puede disparar hasta %(alcance) metros")
  System.print("El objetivo está a %(distanciaObjetivo) metros")
  System.print("La fórmula de la distancia es: alcance * sin(ángulo * 2 * π / 180)")

  while (oportunidades &gt; 0) {

    while (anguloElevacion &lt; anguloMinimo || anguloElevacion &gt; anguloMaximo) {
      System.print()
      System.print("Ingrese el ángulo para disparar")
      anguloElevacion = Num.fromString(Stdin.readLine())

      if (!anguloElevacion) {
        System.print("Debe ingresar un ángulo.")
        anguloElevacion = 0
      } else if (anguloElevacion &gt; anguloMaximo) {
        System.print("El ángulo debe ser menor a %(anguloMaximo)")
      } else if (anguloElevacion &lt; anguloMinimo) {
        System.print("El ángulo debe ser mayor a %(anguloMinimo)")
      }
    }

    // Calculamos la distancia que el tiro llega con el ángulo ingresado.
    // La fórmula matemática (ángulo * 2π/180) convierte los grados del ángulo de
    // a radianes. Considerando 360º.
    // Luego se multiplica el alcance por el seno de los radianes obtenidos
    // para obtener la distancia alcanzada.
    // Finalmente se redondea el resultado para obtener un número entero.
    // Ver: http://math2.org/math/trig/es-tables.htm
    // Ver: https://es.khanacademy.org/science/physics/two-dimensional-motion/two-dimensional-projectile-mot/v/projectile-at-an-angle

    distanciaAlcanzada = (alcance * (anguloElevacion * ( 2 * Num.pi / 180)).sin).round
    distanciaFinal = (distanciaAlcanzada - distanciaObjetivo).abs
    System.print("Distancia Alcanzada: %(distanciaAlcanzada.abs) Distancia Objetivo: %(distanciaObjetivo) Diferencia: %(distanciaFinal)")

    destruido = (distanciaMinima &gt;= distanciaFinal)

    if (destruido) {
      objetivos = objetivos - 1
      jugar = (objetivos &gt; 0)
      System.print()
      System.print("!!BooOOOM!!")
      System.print("¡Felicidades!, haz destruido al objetivo en %(tiros) intentos.")
      System.print()
      break
    }

    // Aumentamos el contador de tiros
    tiros = tiros + 1

    // Y reiniciamos el angulo de elevación
    // para volver a solicitarlo
    anguloElevacion = 0
    oportunidades = oportunidades - 1
    System.print()

    if (distanciaAlcanzada &gt; distanciaObjetivo) {
      System.print("El tiro se pasó en %(distanciaFinal) metros.")
    } else {
      System.print("El tiro quedó corto por %(distanciaFinal) metros.")
    }
    
    jugar = (oportunidades &gt; 0)
    if (jugar) {
      System.print("¡Prueba otra vez!, quedan %(oportunidades) tiros")
    } else {
      System.print("Juego terminado. ¡Haz perdido todas tus balas!")
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gráficos">11.2. Gráficos</h3>
<div class="paragraph">
<p>Aplicaciones que necesitan <a href="http://tic80.com/"><em>TIC 80</em></a> u <a href="https://domeengine.com/"><em>Dome Engine</em></a> para ser ejecutados.</p>
</div>
<div class="sect3">
<h4 id="_breakout">11.2.1. <a href="https://github.com/NinjasCL/breakout">Breakout</a></h4>
<div class="paragraph">
<p>Un clon simple del famoso juego de <em>Breakout</em>.
Debes eliminar todos los bloques dentro de la pantalla utilizando
una raqueta y una pelota. El juego termina si la raqueta falla
en golpear la pelota.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://raw.githubusercontent.com/NinjasCL/breakout/main/breakout.gif" alt="Breakout"></span></p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Avanzado</p>
</div>
<div class="sect4">
<h5 id="_código_fuente_6">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// title:  Clone de breakout para TIC-80
// author: Camilo Castro
// desc:   Un simple clon de breakout en Wren
// script: wren
// based on: https://github.com/digitsensitive/tic-80-tutorials/tree/master/tutorials/breakout

import "random" for Random

var Seed = Random.new()
var T = TIC

class ScreenWidth {
    static min {0}
    static max {240}
}

class ScreenHeight {
    static min {0}
    static max {136}
}
    
class Screen {
    static height {ScreenHeight}
    static width {ScreenWidth}
}

class Input {
    static left {T.btn(2)}
    static right {T.btn(3)}
    static x {T.btn(5)}
}

class Color {
    static black {0}
    static white {12}
    static orange {3}
    static greyl {13}
    static greyd {15}
}

class Collisions {
   // Implements
  // https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection
  static collide(hitbox, hitbox2) {
    return (hitbox.x &lt; hitbox2.x + hitbox2.width &amp;&amp;
            hitbox.x + hitbox.width &gt; hitbox2.x &amp;&amp;
            hitbox.y &lt; hitbox2.y + hitbox2.height &amp;&amp;
            hitbox.y + hitbox.height &gt; hitbox2.y)
  }
}

class PlayerSpeed {
    x {_x}
    x = (value) {
        _x = value
    }
    
    max {_max}
    max = (value) {
        _max = value
    }
    
    construct new() {
        _x = 0
        _max = 4
    }
}

class Player {
    x {_x}
    y {_y}
    width {_width}
    height {_height}
    color {_color}
    speed {_speed}

    state {_state}

    construct new(state) {
        _state = state
        _width = 24
        _height = 4
        _y = 120
        _color = Color.orange
        reset()
    }

    reset() {
        _x = (Screen.width.max/2) - _width/2
        _speed = PlayerSpeed.new()
    }

    draw() {
        T.rect(x, y, width, height, color)
    }

    wall() {
        if (x &lt; Screen.width.min) {
            _x = Screen.width.min
        } else if(x + width &gt; Screen.width.max) {
            _x = Screen.width.max - width
        }
    }

    collisions() {
        wall()
    }

    update() {
        _x = x + speed.x
        if (speed.x != 0) {
            if (speed.x &gt; 0) {
              speed.x = speed.x - 1
            } else {
              speed.x = speed.x + 1
            }
        }
    }

    input() {
        if (Input.left) {
                if (speed.x &gt; -speed.max) {
                    speed.x = speed.x - 2
                } else {
                    speed.x = -speed.max
                }
            }
            
            if (Input.right) {
                if (speed.x &lt; speed.max) {
                        speed.x = speed.x + 2
                    } else {
                        speed.x = speed.max
                    }
            }
    }
}

class BallSpeed {
    x {_x}
    x = (value) {
        _x = value
    }
    
    y {_y}
    y = (value) {
        _y = value
    }
    
    max {_max}
    
    construct new() {
        _x = 0
        _y = 0
        _max = 1.5
    }
}

class Ball {
    x {_x}
    y {_y}
    width {_width}
    height {_height}
    color {_color}
    deactive {_deactive}
    speed {_speed}
    
    player {_player}
    player = (value) {
        _player = value
    }
    
    state {_state}
    
    construct new(player, state) {
        _width = 3
        _height = 3
        _color = Color.greyl
        _player = player
        _state = state
        reset()
    }
    
    position() {
        _x = player.x + (player.width / 2) - 1.5
        _y = player.y - 5
    }
    
    reset() {
        position()
        _deactive = true
        _speed = BallSpeed.new()
    }
    
    input() {
        if (deactive) {
                position()
                if (Input.x) {
                    speed.x = (Seed.float(0, 10).floor * 2) - 1
                        speed.y = speed.y - 1.5
                        _deactive = false
                }
            }
    }
    
    wall() {
        // top
        if (y &lt; 0) {
            speed.y = -speed.y
            
        // left
        } else if (x &lt; 0) {
            speed.x = -speed.x
        
        // right
        } else if (x &gt; 240 - width) {
            speed.x = -speed.x
        }
    }
    
    ground() {
        if (y &gt; 136 - width) {
                reset()
                state.lifeDown()
        }
    }
    
    paddle() {
        if (Collisions.collide(this, player)) {
            speed.y = -speed.y
            speed.x = speed.x + 0.3 * player.speed.x
        } 
    }
    
    brick(brick) {

        // collide left or right side
        if (brick.y &lt; y &amp;&amp;
            y &lt; brick.y + brick.height &amp;&amp;
            (x &lt; brick.x || brick.x + brick.width &lt; x)) {
                speed.x = -speed.x
            }
        // collide top or bottom
        if (y &lt; brick.y ||
        (y &gt; brick.y &amp;&amp; brick.x &lt; x &amp;&amp;
        x &lt; brick.x + brick.width)) {
            speed.y = -speed.y
        }
    }

    collisions() {
        wall()
        ground()
        paddle() 
    }
    
    update() {
        _x = x + speed.x
        _y = y + speed.y
        
        if (speed.x &gt; speed.max) {
            speed.x = speed.max
        }
    }
    
    draw() {
        T.rect(x, y, width, height, color)
    }
}

class Brick {
    x {_x}
    y {_y}
    width {_width}
    height {_height}
    color {_color}

    construct new(x, y, color) {
        _x = x
        _y = y
        _width = 10
        _height = 4
        _color = color
    }
    
    draw() {
        T.rect(x, y, width, height, color)
    }
}

class Board {
    width {19}
    height {12}

    ball {_ball}
    state {_state}

    bricks {
        if (!_bricks) {
            _blicks = []
        }

        return _bricks
    }
        
    construct new(ball, state) {
        _ball = ball
        _state = state
        reset()
    }

    reset() {
        _bricks = []
        for (i in 0..height) {
            for (j in 0..width) {
                var x = 10 + j * 11
                var y = 10 + i * 5
                var color = i + 1
                var brick = Brick.new(x, y, color)
                bricks.add(brick)
            }
        }
								ball.reset()
    }
        
    draw() {
        bricks.each {|brick|
            brick.draw()
        }
    }
    
    collisions() {
        var index = 0
        if (bricks.count &lt;= 0) {
            reset()
        }

        var note = "C-%(Seed.int(4,7))"

        bricks.each {|brick|
            if (Collisions.collide(ball, brick)) {
                T.sfx(0, note, 10)
                bricks.removeAt(index)
                ball.brick(brick)
                state.scoreUp()
            }
            index = index + 1
        }
    }
    
    update() {}
    input() {}
}

class Stage {
    objects {_objects}
    state {_state}
    
    construct new(state) {
        _objects = []
        _state = state
    }
    
    add(object) {
        objects.add(object)
    }
    
    input() {
        if (!state.isPlaying) return
        
        objects.each {|object|
            object.input()
        }
    }
    
    draw() {
        if (!state.isPlaying) return
        
        objects.each {|object|
            object.draw()
        }
    }
    
    update() {
    
        if (!state.isPlaying) return
        
        objects.each {|object|
            object.update()
        }
    }
    
    collisions() {
        if (!state.isPlaying) return 
        
        objects.each {|object|
            object.collisions()
        }
    }
}

class GUI {
    player {_player}
    state {_state}
    
    construct new(player, state) {
        _player = player
        _state = state
    }
    
    scores() {
       // shadow
        T.print("SCORE ", 5, 1, Color.greyd)
        T.print(state.score, 40, 1, Color.greyd)
        
        // forecolor
        T.print("SCORE ", 5, 0, Color.white)
        T.print(state.score, 40, 0, Color.white)
        
        // shadow
        T.print("LIVES ", 190, 1, Color.greyd)
        T.print(state.lives, 225, 1, Color.greyd)
        
        // forecolor
        T.print("LIVES ", 190, 0, Color.white)
        T.print(state.lives, 225, 0, Color.white)
    }
    
    gameover() {
      T.print("Game Over", (Screen.width.max/2) - 6 * 4.5, 136/2, Color.white) 
    }
    
    input() {
        if (!state.isPlaying &amp;&amp; Input.x) {
            state.start()
        }
    }
    
    draw() {
        if (state.isPlaying) {
            return scores()
        }
        gameover()
    }
}

class GameState {
    static game {__game}
    static game = (value) {
        __game = value
    }

    static isPlaying {__playing}
    
    static score {
        if (!__score) {
            __score = 0
        }
        
        return __score
    }
    
    static score = (value) {
        __score = value
    }
    
    static lives {
        if (!__lives || __lives &lt; 0) {
            __lives = 3
        }
        
        return __lives
    }
    
    static lives = (value) {
        if (value &lt; 0) {
            over()
        }
        __lives = value
    }
    
    static over() {
        reset()
        __playing = false
    }
    
    static start() {
        __playing = true
    }
    
    static lifeDown() {
        lives = lives - 1
    }
    
    static scoreUp() {
        score = score + 100
    }
    
    static reset() {
        score = 0
        lives = 3
        game.reset()
    }
}



class Game is TIC {
    player {_player }
    stage {_stage }
    gui {_gui }
    
    construct new() {
        reset()
    }

    reset() {
        GameState.start()
        GameState.game = this

        _player = Player.new(GameState)
        _ball = Ball.new(_player, GameState)
        
        _gui = GUI.new(_player, GameState)
        
        _board = Board.new(_ball, GameState)
            
        _stage = Stage.new(GameState)
        _stage.add(_player)
        _stage.add(_ball)
        _stage.add(_board)
    }
    
    TIC() {
        T.cls(0)
        input()
        update()
        collisions()
        draw()
    }
    
    input() {
        gui.input()
        stage.input()
    }
    
    update() {
        stage.update()
    }
    
    collisions() {
        stage.collisions()
    }
    
    draw() {
        stage.draw()
        gui.draw()
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_snake">11.2.2. <a href="https://github.com/NinjasCL/snake">Snake</a></h4>
<div class="paragraph">
<p>Un clon simple del famoso juego de la serpiente.
Si come se agranda su cola y el juego termina al momento de que la cabeza
toque una parte de su propio cuerpo.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://raw.githubusercontent.com/NinjasCL/snake/main/game.gif" alt="Snake"></span></p>
</div>
<div class="paragraph">
<div class="title">Nivel</div>
<p>Avanzado</p>
</div>
<div class="sect4">
<h5 id="_código_fuente_7">Código fuente</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// title:  Clone de Snake para TIC-80
// author: Camilo castro
// desc:   Un pequeño clon de Snake
// script: wren
// based on: https://github.com/nesbox/TIC-80/wiki/Snake-Clone-tutorial

import "random" for Random

var Rand = Random.new()
var T = TIC

class Input {
		static up {T.btn(0)}
		static down {T.btn(1)}
		static left {T.btn(2)}
		static right {T.btn(3)}
		static x {T.btn(5)}
}

class Color {
  static black {0}
		static white {12}
		static green {5}
		static blue {10}
		static orange {3}
		static greyd {15} 
}

class Screen {
  static width {240}
		static height {136}
}

class Position {
  x {
		if (!_x) {
			_x = 0
			}
			return _x
		}
		
		x = (value) {
		_x = value
		}
		
		y {
		if (!_y) {
			_y = 0
			}
			return _y
		}
		
		y = (value) {
		_y = value
		}
		
		construct new(x, y) {
			_x = x
			_y = y
		}
}

class GameState {
  static game {__game}
		static game = (value) {
			__game = value
		}
		
		static snake {__snake}
		static snake = (value) {
			__snake = value
		}
		
		static score {
			if (!__score) {
				__score = 0
			}
			return __score
		} 
		
		static scoreUp() {
			__score = score + 100
		}
		
  static frame {
		if (!__frame || __frame &gt; Num.largest - 1) {
					__frame = 0
				}
				return __frame
		}
		
		static frameUp() {
			__frame = frame + 1
		}
		
		static isTenthFrame {frame % 10 == 0}
		
		static isPlaying {
			if (__isPlaying is Null) {
				__isPlaying = true
			}
			return __isPlaying
		}
		
		static isPlaying = (value) {
			__isPlaying = value
		}
		
		static start() {
			isPlaying = true
		}
		
		static gameover() {
			reset()
				isPlaying = false
		}
		
		static reset() {
			__score = 0
			game.reset()
		} 
}

class Food is Position {
	snake {_snake}
	
	construct new (snake) {
			_snake = snake
			place()
	}
	
	random() {
		x = Rand.int(0, 29)
		y = Rand.int(0, 16)
	}
	
	place() {
		random()
		snake.body.each{|part|
			if (part.x == x &amp;&amp; part.y == y) {
					place()
			}
		}
	}
	
	draw() {
	  T.rect(x * 8, y * 8, 8, 8, Color.orange)
	}
	
	update() {}
	input() {}
	
	collisions() {
		snake.eat(this)
	}
}

class Direction {
	static directions {
		if (!__directions) {
				__directions = [
						Position.new(0, -1), // up
						Position.new(0, 1), // down
						Position.new(-1, 0), // left
						Position.new(1, 0) // right
				]
			}
			return __directions
		}
		
		static up {directions[0]}
		static down {directions[1]}
		static left {directions[2]}
		static right {directions[3]}
}

class Snake {
  tail {body[0]}
		neck {body[body.count - 2]}
		head {body[body.count - 1]}
		body {
			if (!_body) {
					var tail = Position.new(15, 8)
					var neck = Position.new(14, 8)
					var head = Position.new(13, 8)
					_body = [tail, neck, head]				 
				}
				return _body
		}
		
		direction {
			if (!_direction) {
				_direction = Direction.up
			}
			return _direction
		}
		
		state {_state}
		
		construct new(state) {
			_state = state
		}
		
		reset() {
			_body = null
			_direction = Direction.up
		}
		
		input() {
			var last = direction
			
			if (Input.up) {
				_direction = Direction.up
			}
			
			if (Input.down) {
				_direction = Direction.down
			}
			
			if (Input.left) {
				_direction = Direction.left
			}
			
			if (Input.right) {
				_direction = Direction.right
			}
			
			if (head.x + direction.x == neck.x &amp;&amp;
				head.y + direction.y == neck.y) {
					_direction = last
			}
		}
		
		draw() {
			body.each{|part|
			 T.rect(part.x * 8, part.y * 8, 8, 8, Color.blue)
			}
		}
		
		update() {
		
			var x = (head.x + direction.x) % 30
			if (x &lt; 0) {
				x = 29
			}
			
			var y = (head.y + direction.y) % 17
			if (y &lt; 0) {
				y = 17
			}
			
			var part = Position.new(x, y)
			
			body.add(part)
		}
		
		removeTail() {
			body.removeAt(0)
		}
		
		eat(food) {
			if (head.x == food.x &amp;&amp; head.y == food.y) {
				T.sfx(0, "C-5", 10)
				state.scoreUp()
				food.place()
			} else {
				removeTail()
			}
		}
		
		collisions() {
				
				// Search if head collisions with body parts
				// omit last part since its the head
			body[0...(body.count - 1)].each{|part|
					if (head.x == part.x &amp;&amp; head.y == part.y) {
							state.gameover()
					}
			}
		}
}

class Stage {
  items {_items}
		
	construct new() {
		_items = []
	}
		
  add(object) {
			items.add(object)
	}
		
  input() {
			items.each{|object|
					object.input()
			}
	}
		
	draw() {
		items.each{|object|
			object.draw()
		}
	}
	
	update() {
		items.each{|object|
			object.update()
		}
	}
	
	collisions() {
		items.each{|object|
			object.collisions()
		}
	}
}

class GUI {
		state {_state}
		
		construct new(state) {
			_state = state
		}
		
		score() {
			T.print("SCORE %(state.score)", 5, 5, Color.blue)
			T.print("SCORE %(state.score)", 5, 4, Color.white)
		}
		
		gameover() {
			T.cls(Color.black)
			T.print("Game Over", (Screen.width/2) - 6 * 4.5, (Screen.height / 2), Color.white)
		}
		
		input() {
			if (!state.isPlaying &amp;&amp; Input.x) {
					state.start()
			}
		}
		
		update() {}
		collisions() {}
		
		draw() {
			if (state.isPlaying) {
					return score()
			}
			gameover()
		}
}

class Game is TIC {
		stage {
			if (!_stage) {
					GameState.game = this
					_stage = Stage.new()
					_stage.add(snake)
					_stage.add(food)
					_stage.add(gui)
			}
			return _stage
		}
		
		gui {
			if (!_gui) {
				_gui = GUI.new(GameState)
			}
			return _gui
		}
		
		snake {
			if (!_snake) {
				_snake = Snake.new(GameState)
				GameState.snake = _snake
			}
			return _snake
		}
		
		food {
			if (!_food) {
				_food = Food.new(snake)
			}
			return _food
		}
		
		construct new() {
				reset()
		}
		
		reset() {
			snake.reset()
		}
		
		TIC() {
			T.cls(Color.green)
			GameState.frameUp()
			input()
			
			if (GameState.isTenthFrame) { 
				update()
				collisions()
			}

			draw()
		}
		
		input() {
			stage.input()
		}
		
		update() {
			stage.update()
		}
		
		collisions() {
			stage.collisions()
		}
		
		draw() {
			stage.draw()
		}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_soluciones_a_ejercicios">12. Soluciones a Ejercicios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Las siguientes son las soluciones a los ejercicios planteados en el libro. No necesariamente son la única forma de resolverlos. Se recomienda intentar resolver los ejercicios antes de ver las soluciones.</p>
</div>
<div class="sect2">
<h3 id="_capítulo_1">12.1. Capítulo 1</h3>
<div class="sect3">
<h4 id="chap1-ex1-sol">12.1.1. Solución: <a href="#chap1-ex1">¡Hola Wren!</a></h4>
<div class="paragraph">
<div class="title">Ejecución</div>
<p><code>$ ./wren hola.wren</code></p>
</div>
<div class="listingblock">
<div class="title">Salida</div>
<div class="content">
<pre class="highlight"><code>¡Hola Wren!</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Código</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// muestra: ¡Hola Wren!
System.print("¡Hola Wren!")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_capítulo_3">12.2. Capítulo 3</h3>
<div class="sect3">
<h4 id="chap3-ex1-sol">12.2.1. Solución: <a href="#chap3-ex1">Donas</a></h4>
<div class="paragraph">
<div class="title">Ejecución</div>
<p><code>$ ./wren donas.wren</code></p>
</div>
<div class="listingblock">
<div class="title">Código</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">var donas = Fn.new {|cantidad|
  // Tu código aquí
  var mensaje = "Número de donas:"
  if (cantidad &gt;= 10) {
    return "%(mensaje) muchas"
  }
  return "%(mensaje) %(cantidad)"
}


// Pruebas para evaluar que el ejercicio
// se ha completado exitosamente.
// no modificar.

var probar = Fn.new {|tengo, quiero|
  var prefijo = " X "
  if (tengo == quiero) {
    prefijo = " OK "
  }
  System.print("%(prefijo) tengo: %(tengo) quiero: %(quiero)")
}

System.print("Probando donas")
probar.call(donas.call(4), "Número de donas: 4")
probar.call(donas.call(9), "Número de donas: 9")
probar.call(donas.call(10), "Número de donas: muchas")
probar.call(donas.call(99), "Número de donas: muchas")
System.print()</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glosario">Glosario</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lista de conceptos utilizados a lo largo de este documento.</p>
</div>
<div class="dlist glossary">
<dl>
<dt>class</dt>
<dd>
<p>Significa <em>"clase"</em>.</p>
</dd>
<dt>call</dt>
<dd>
<p>Significa <em>"llamar"</em>.</p>
</dd>
<dt>construct</dt>
<dd>
<p>Significa <em>"constructor"</em>.</p>
</dd>
<dt>object</dt>
<dd>
<p>Significa <em>"objeto"</em>.</p>
</dd>
<dt>start</dt>
<dd>
<p>Inicio, principio, comienzo.</p>
</dd>
<dt>end</dt>
<dd>
<p>Fin, término, final.</p>
</dd>
<dt>each</dt>
<dd>
<p>Palabra que significa <em>"cada uno"</em>. Usado en ciclos iterativos para evaluar cada uno de los elementos.</p>
</dd>
<dt>for</dt>
<dd>
<p>Instrucción que significa <em>"para"</em>. Usada dentro de los bucles y en conjunto a la instruacción <em>"import"</em>.</p>
</dd>
<dt>foreign</dt>
<dd>
<p>Instrucción que significa <em>"extranjero"</em>. Usada para indicar que la clase, propiedad o variable será implementada fuera de <em>Wren</em>. Normalmente cuando se necesita utilizar código en otros lenguajes como <em>C</em>.</p>
</dd>
<dt>false</dt>
<dd>
<p>Instrucción que significa <em>"falso"</em>. Usado para indicar una condición no se está cumpliendo. Su contraparte es la instrucción <em>"true"</em>.</p>
</dd>
<dt>fiber</dt>
<dd>
<p>Significa <em>"fibra"</em>.</p>
</dd>
<dt>fn</dt>
<dd>
<p>Significa <em>"función"</em>.</p>
</dd>
<dt>función</dt>
<dd>
<p>Bloque de código que puede ser ejecutado en distintos puntos del ciclo de vida del código. También puede ser asignado a variables.</p>
</dd>
<dt>new</dt>
<dd>
<p>Significa <em>"nuevo"</em>.</p>
</dd>
<dt>print</dt>
<dd>
<p>Instrucción que significa <em>"mostrar"</em> o <em>"imprimir"</em>. Usado para mostrar un valor.</p>
</dd>
<dt>parámetro</dt>
<dd>
<p>Son variables que son enviados a las funciones. Pueden ser por valor o por referencia.</p>
</dd>
<dt>static</dt>
<dd>
<p>Instrucción que significa <em>"estático"</em>. Usado para indicar que una propiedad o método de una clase no necesita una instancia para ser invocado.</p>
</dd>
<dt>string</dt>
<dd>
<p>Significa <em>"cadena de caracteres"</em>.</p>
</dd>
<dt>int</dt>
<dd>
<p>Significa <em>"número entero"</em>.</p>
</dd>
<dt>float</dt>
<dd>
<p>Significa <em>"número decimal con punto flotante"</em>.</p>
</dd>
<dt>random</dt>
<dd>
<p>Signfica <em>"aleatorio"</em>.</p>
</dd>
<dt>num</dt>
<dd>
<p>Significa <em>"número"</em>.</p>
</dd>
<dt>true</dt>
<dd>
<p>Instrucción que significa <em>"verdadero"</em>. Usado para indica una condición que si se cumple. Su contraparte es la instrucción <em>"false"</em>.</p>
</dd>
<dt>trim</dt>
<dd>
<p>Instrucción que significa <em>"cortar"</em>. Usado para eliminar caracteres dentro de un string.</p>
</dd>
<dt>import</dt>
<dd>
<p>Instrucción que significa <em>"incluir"</em>. Obtener datos desde un archivo e incluir sus contenidos en el contexto.
Ejemplo <code>import "random" for Random</code>.</p>
</dd>
<dt>if</dt>
<dd>
<p>Instrucción que significa <em>"si"</em>. Permite crear una condicional y controlar el flujo de datos dentro de un programa.</p>
</dd>
<dt>is</dt>
<dd>
<p>Instrucción que significa <em>"es"</em>. Permite evaluar si un objeto es miembro de un tipo de clase.</p>
</dd>
<dt>else</dt>
<dd>
<p>Instrucción que significa <em>"en otro caso"</em>. Normalmente usado para indicar una condición alternativa si la condición <em>"if"</em> principal no se cumple.</p>
</dd>
<dt>var</dt>
<dd>
<p>Instrucción que significa <em>"variable"</em>. Usado para declarar una nueva variable.</p>
</dd>
<dt>while</dt>
<dd>
<p>Instrucción que significa <em>"mientras"</em>. Usada dentro de los bucles.</p>
</dd>
<dt>write</dt>
<dd>
<p>Instrucción que signiica <em>"escribir"</em>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliografía">Bibliografía</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Una lista de recursos complementarios y referenciales.</p>
</div>
<div class="ulist bibliography">
<div class="title">Libros</div>
<ul class="bibliography">
<li>
<p><a id="inventwithpython"></a>[inventwithpython] Albert Sweigart. 'Inventa tus Propios Juegos de computadora con Python'. <a href="http://inventwithpython.com/es" class="bare">http://inventwithpython.com/es</a>. ISBN 978-1514370926</p>
</li>
<li>
<p><a id="alfonseca"></a>[alfonseca] Manuel Alfonseca. 'Cómo construir juegos de aventura'. <a href="https://worldofspectrum.org/archive/books/enciclopedia-practica-de-la-informatica-aplicada-1-como-construir-juegos-de-aventura" class="bare">https://worldofspectrum.org/archive/books/enciclopedia-practica-de-la-informatica-aplicada-1-como-construir-juegos-de-aventura</a>. ISBN 84-7688-019-7</p>
</li>
</ul>
</div>
<div class="ulist bibliography">
<div class="title">Sitios Web</div>
<ul class="bibliography">
<li>
<p><a id="introtopython"></a>[introtopython] Eric Matthes. 'Introduction to Python' <a href="https://github.com/ehmatthes/intro_programming" class="bare">https://github.com/ehmatthes/intro_programming</a></p>
</li>
<li>
<p><a id="googlepython"></a>[googlepython] Google. 'Python Class' <a href="http://code.google.com/edu/languages/google-python-class/" class="bare">http://code.google.com/edu/languages/google-python-class/</a></p>
</li>
<li>
<p><a id="puntoflotante"></a>[puntoflotante] Michael Borgwardt. <a href="https://github.com/Pybonacci/puntoflotante.org" class="bare">https://github.com/Pybonacci/puntoflotante.org</a></p>
</li>
<li>
<p><a id="rosettacode-wren"></a>[rosettacode-wren] Rosetta Code. <a href="https://rosettacode.org/wiki/Category:Wren" class="bare">https://rosettacode.org/wiki/Category:Wren</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Índice">Índice</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_colofón">Colofón</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Escrito por <a href="https://ninjas.cl">Camilo Castro</a> y <a href="https://github.com/ninjascl/wren-adventures/graphs/contributors">colaboradores</a>. Para <a href="https://ninjas.cl">Ninjas.cl</a>.</p>
</div>
<div class="paragraph">
<p>Esta obra está bajo una <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Atribución-No-Comercial-Compartir-Igual 4.0 Internacional</a></p>
</div>
<div class="paragraph">
<p><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="image"><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Licencia Creative Commons"></span></a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-12-27 11:19:08 -0300
</div>
</div>
</body>
</html>