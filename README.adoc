:toc: macro
:toc-title: Tabla de Contenidos
:toclevels: 3

# https://github.com/wren-lang/wren[_Wren]_ Adventures

En este pequeÃ±o documento se detallarÃ¡n lo bÃ¡sico del lenguaje de programaciÃ³n http://wren.io[Wren]. 

Escrito por https://ninjas.cl[Camilo Castro] y https://github.com/ninjascl/wren-adventures/graphs/contributors[colaboradores]. Para https://ninjas.cl[Ninjas.cl].

Esta obra estÃ¡ bajo una http://creativecommons.org/licenses/by-nc-sa/4.0/[Licencia Creative Commons AtribuciÃ³n-No-Comercial-Compartir-Igual 4.0 Internacional]

http://creativecommons.org/licenses/by-nc-sa/4.0/[image:https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png[Licencia Creative Commons]]

toc::[]

## PequeÃ±a Historia de https://github.com/wren-lang/wren[_Wren]_

https://github.com/wren-lang/wren[_Wren]_ es un lenguaje de programaciÃ³n https://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos[orientado a objetos] creado por http://journal.stuffwithstuff.com/[Bob Nystrom], un ex desarrollador de videojuegos y creador de otros lenguajes de programaciÃ³n como https://github.com/munificent/vigil[Vigil], http://finch.stuffwithstuff.com/[Finch] y http://magpie-lang.org/[Magpie]. Ha escrito dos libros: http://gameprogrammingpatterns.com/[Game Programming Patterns] y http://craftinginterpreters.com/[Crafting Interpreters]. 

El primer _commit_ de _Wren_ fue escrito el https://github.com/wren-lang/wren/tree/2f6a6889f1b4a1ba86aeb169e7398704b1ee04c0[22 de Octubre del 2013] y su versiÃ³n mÃ¡s reciente es la _0.3_. Actualmente _Bob Nystrom_ pasÃ³ a ser colaborador y la evoluciÃ³n del lenguaje fue asignada a https://github.com/underscorediscovery[_discovery] (creador del https://luxeengine.com[game engine Luxe]).

_Wren_ fue creado como una alternativa a _Lua_ y otros https://en.wikipedia.org/wiki/Scripting_language[lenguajes de scripting] para personas que estuvieran mÃ¡s familiarizadas con lenguajes orientados a objetos como _Java_, _C#_, o _C++_. Su principal foco es la simpleza.

La pÃ¡gina oficial de Wren es http://wren.io[Wren.io].

### Â¿QuÃ© es un _Wren_?

_Wren_ es una https://es.wikipedia.org/wiki/Troglodytidae[tipo de ave pequeÃ±a] perteneciente a la familia de los troglodÃ­tidos. En Chile tenemos al https://www.avesdechile.cl/074.htm[ChercÃ¡n o Chochin Criollo].

image:https://user-images.githubusercontent.com/292738/77261969-2240d580-6c71-11ea-93d0-4341e82c2f92.png[Chochin Criollo - FotografÃ­a por Juan Tassara B.]

> FotografÃ­a por Juan Tassara B en https://www.avesdechile.cl.


## Â¿CÃ³mo usar Wren?

_Wren_ es un lenguaje interpretado, lo que significa que no requiere de compilaciÃ³n. Basta simplemente tener un intÃ©rprete para ejecutar los algoritmos. Hay varias alternativas.

1. https://github.com/wren-lang/wren[Compilar tu propio intÃ©rprete de _Wren_]. Esta es la opciÃ³n para valientes.

2. https://github.com/wren-lang/wren-cli/releases[Utiliza _Wren CLI_] para ejecutar archivos _*.wren_.

3. Utiliza un engine de juegos como https://domeengine.com/[_Dome_], https://tic.computer[_TIC 80_] o https://luxeengine.com/alpha/[_Luxe_] que traen _Wren_ listo para llegar y utilizar.

4. Utiliza http://ppvk.github.io/wren-nest/[_Wren Nest_] para probar el lenguaje en tu navegador. (Puede que no tenga las Ãºltimas novedades).

Una vez que tengas tu intÃ©rprete instalado puedes ejecutar `wren main.wren` para ver el resultado de tu script.

## Nociones BÃ¡sicas

### Saltos de lÃ­nea

_Wren_ utiliza los saltos de lÃ­nea (`\n`), por lo que no es necesario utilizar el punto y coma (`;`) para separar instrucciones. Sin embargo omite los saltos de lÃ­nea si la instrucciÃ³n espera mÃ¡s informaciÃ³n para ser vÃ¡lida.

#### Ejemplo: *String multi lÃ­nea*

_Wren_ permite string multilÃ­neas utilizando el caracter de comillas dobles (`"`). El mismo caracter sirve para lÃ­neas simples. El caracter de comilla simple (`'`) no es significativo para _Wren_.

```js
"
 Todo esto es una string multi lÃ­nea
 Wren esperarÃ¡ hasta que aparezca 
 la siguiente comilla doble.
 Los strings multi lÃ­nea en Wren guardan tanto espacios como saltos de lÃ­nea en su interior.
 (no son omitidos).
"
```

#### Ejemplo: *Lista de elementos*

```js
var animales = [
  "perro",
  "gato",
  "condor",
  "huemul"
]
```

#### Ejemplo: *ParÃ¡metros de un mÃ©todo*

```js
 MiClase.metodo(
       parametro1,
       parametro2,
       parametro3
 )
```

#### Ejemplo: *Generar un nÃºmero al azar del 0 al 9*.

Al considerar los saltos de lÃ­nea significativos, 
provoca un comportamiento inusual al momento de llamar mÃ©todos.

InstrucciÃ³n en una sola lÃ­nea.

```js
Random.new().int(10)
```

Esto no es vÃ¡lido en _Wren_ (Pero si es vÃ¡lido en la mayorÃ­a de los lenguajes de programaciÃ³n).

```js
Random
.new()
.int(10)
```

Para ser vÃ¡lido necesitamos poner un punto al final de la lÃ­nea.

```js
Random.
new().
int(10)
```

Este comportamiento inusual espera ser reparado en la versiÃ³n `0.4`.

#### Ejemplo: *Error*

La siguiente lÃ­nea arroja error debido a que no tiene un salto de lÃ­nea o una operaciÃ³n.

```js
Random.new().int(10) Random.new().int(10)
```

### Palabras Reservadas

_Wren_ es un lenguaje simple y pequeÃ±o. Sus palabras reservadas son las siguientes:

```js
break class construct else false for foreign if import 
in is null return static super this true var while
```

#### Caracteres Significativos

- Caracteres comunes (`+ - * / % < > = ! ( ) [ ] | . " { } , & ^ ? : ~ _`)
- Retorno de carro (`\n`)

### Comentarios

Los comentarios utilizan la misma sintaxis que el https://es.wikipedia.org/wiki/C_(lenguaje_de_programaci%C3%B3n)[`Lenguaje de ProgramaciÃ³n C`].

Los sÃ­mbolos son los siguientes: `/* */` (multi lÃ­nea) y `//` (lÃ­nea Ãºnica).

```

// Comentario de una sola lÃ­nea

/*
Este comentario 
tiene mÃºltiples
lÃ­neas
*/
```

Se pueden anidar los comentarios. Ãºtil para comentar cÃ³digo que ya tenga comentarios.

```
/*
Este comentario 
tiene mÃºltiples
lÃ­neas.
  /* TambiÃ©n puedes incluir comentarios, 
  dentro de comentarios multi lÃ­nea. 
  */
*/
```

#### Tip

Puedes combinar los comentarios de una sola lÃ­nea con los de mÃºltiples lÃ­neas para
comentar/descomentar rÃ¡pidamente secciones de cÃ³digo.

```js
// /*
   codigo()
// */
```

Al eliminar el comentario de la primera lÃ­nea, el cÃ³digo serÃ¡ comentado. De esta forma rÃ¡pidamente
puedes activar o desactivar secciones de cÃ³digo.

```js
/*
   codigo()
// */
```

Puede aÃºn ser mÃ¡s simplificado de esta forma

```js
//*
   codigo()
// */
```

Si se elimina el primer `/` el cÃ³digo serÃ¡ comentado. Por lo que se ahorra un par de movimientos al realizar el comentario.

```js
/*
   codigo()
// */
```

### Identificadores

Similar al _Lenguaje C_, para los indentificadores se pueden utilizar los caracteres de la http://www.asciitable.com/[lista `ascii`] y comenzar con un caracter alfabÃ©tico o guiÃ³n bajo. Los identificadores en _Wren_ diferencian entre mayÃºsculas y minÃºsculas. Solo se permiten letras (`A - Z`, `a - z`), nÃºmeros (`0 - 9`) y guiÃ³n bajo (`_`). No se permiten espacios o comenzar con un nÃºmero.

#### Ejemplo de Identificadores vÃ¡lidos

```js
hola 
camelCase 
PascalCase 
_under_score 
abc123 
TODAS_MAYUSCULAS
```

#### Ejemplo de Identificadores no vÃ¡lidos

```
13hola 
mi-variable
$miVariable 
mi variable
Ã±andÃº
ğŸ‘¨miVariable
miğŸ‘©Variable
```

#### Unicode

No estÃ¡n permitidos caracteres https://es.wikipedia.org/wiki/UTF-8[UTF-8] como la `Ã‘` o los emojis en los identificadores. Sin embargo las `Strings` las soportan en su contenido sin problemas. Hay lenguajes como https://swift.org/[_Swift_] que si soportan identificadores con emojis, aunque la utilidad de esta prÃ¡ctica es debatible.

#### Identificadores con GuiÃ³n Bajo

Un caso especial es para los identificadores con guiÃ³n bajo como `_color` (un guiÃ³n bajo al principio) y `__sabor` (dos guiones bajos al principio). Con un guiÃ³n bajo indica que es un campo de instancia, mientras que con dos guiones bajos indican que es un campo de clase. MÃ¡s detalles en la secciÃ³n de Clases.

### Strings

Las cadenas de caracteres son delimitadas por las comillas dobles (`"`). Pueden ser de una sola lÃ­nea o multi lÃ­nea. En el caso de ser multi lÃ­nea, estas conservarÃ¡n todos los caracteres de espacio y salto de lÃ­nea contenidos en el _string_.

Las strings pueden contener caracteres unicode.

#### Contando el largo del string

Si utilizamos la propiedad `count` podremos obtener el largo de un string.

Por ejemplo `"hola".count` devolverÃ¡ `4`. Hay que tener cuidado con los caracteres unicode (emojis), ya que el largo dependerÃ¡ de lo que se estÃ© contando. _Wren_ cuenta los escalares unicode cuando se trata de emojis (similar al comportamiento de https://www.ruby-lang.org/en/[_Ruby_] y https://www.python.org/[_Python 3_]).

```js

System.print("a".count) // Retorna 1.
System.print("a".bytes.count) // Retorna 1 (Parte de la tabla ASCII original).

System.print("Ã±".count) // Retorna 1.
System.print("Ã±".bytes.count) // Retorna 2.

System.print("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".count) // Retorna 7 al contar los caracteres escalares de Unicode
System.print("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".bytes.count) // Retorna 25 al contar unidades de cÃ³digo UTF-8
```

`System.print("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".count)` retorna 7 por que se estÃ¡ contando los caracteres escalares de unicode, es decir, el emoji ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ estÃ¡ formado por los siguientes escalares : ğŸ‘¨ + caracter de uniÃ³n de ancho cero + ğŸ‘© + caracter de uniÃ³n de ancho cero + ğŸ‘§ + caracter de uniÃ³n de ancho cero + ğŸ‘¦.

Hay dos formas de contar adicionales que _Wren_ todavÃ­a no soporta. Que es contar por unidades de cÃ³digo _UTF-16_ y considerar los emojis compuestos como una unidad.

El string "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" deberÃ­a ser de largo 11 para la codificaciÃ³n _UTF-16_. Mientras que deberÃ­a ser de largo 1 si lo consideramos como un caracter singular.

